<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook50-profile.xsl"
                 type="text/xml"
                 title="Profiling step"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<article xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="article-selinux" xml:lang="en">
  <title>&slema; security</title>
  <section xml:id="sec-introduction-selinux">
    <title>Introduction to SELinux</title>
    <section xml:id="sec-terminology">
      <title>Terminology</title>
      <para>
        The following terms are used in this document:
      </para>
      <variablelist>
        <title>Terminology</title>
        <varlistentry>
          <term>context</term>
          <listitem>
            <para></para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>domain</term>
          <listitem>
            <para>is a type assigned to a process</para>
          </listitem>
        </varlistentry>        
        <varlistentry>
          <term>entrypoint</term>
          <listitem>
            <para></para>
          </listitem>
        </varlistentry> 
        <varlistentry>
          <term>identity</term>
          <listitem>
            <para></para>
          </listitem>
        </varlistentry> 
        <varlistentry>
          <term>label</term>
          <listitem>
            <para></para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>mode</term>
          <listitem>
            <para>is a mode of SELinux operation. For details refer to</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>policy</term>
          <listitem>
            <para>is a set of rules that define what actions can be performed on types by domains. For details refer to</para>
          </listitem>
        </varlistentry> 
        <varlistentry>
          <term>role</term>
          <listitem>
            <para></para>
          </listitem>
        </varlistentry> 
        <varlistentry>
          <term>transition</term>
          <listitem>
            <para>there are two types of transitions:</para>
            <listitem>
              <para><emphasis>domain transition</emphasis></para>
            </listitem>
            <listitem>
              <para><emphasis>file type transition</emphasis></para>
            </listitem>
          </listitem>
        </varlistentry>       
        <varlistentry>
          <term>type</term>
          <listitem>
            <para></para>
          </listitem>
        </varlistentry>        
      </variablelist>
    </section>
    <section xml:id="sec-selinux-modes">
      <title>SELinux modes</title>
      <para>
        SELinux can run in one of three modes: <literal>disabled</literal>, <literal>permissive</literal>, or <literal>enforcing</literal>.
      </para>
      <para>
        Using the <literal>disabled</literal> means that no rules from the SELinux policy are applied and your system is not protected. Therefore, the <literal>disabled</literal> mode is not recommended.
      </para>
      <para>
        In the <literal>permissive</literal> mode, the security policy is applied, the file system is labelled and access denial entries are logged. Though no access is actually denied.
      </para>
      <para>
        In the <literal>enforced</literal> mode, the security policy is applied. Each acces that is not explicitly allowed by the policy is denied.
      </para>
    </section>
  </section>
  <section xml:id="sec-getting-selinux">
    <title>Getting SELinux</title>
    <para>
      SELinux is installed by default when installing by &yast; or is part of the pre-built images. In system installed manually by &yast;, SELinux is in the <literal>disabled</literal> mode by default and the file system is not labelled. If you deployed your system using the pre-built images, the SELinux mode is <literal>permissive</literal> and the file system is labelled.
      </para>
      <para>
        To set the SELinux mode to <literal>enforcing</literal> and configure your system properly for using SELinux, run the following command: 
    </para>
    <screen>&prompt.root;transactional-update setup-selinux</screen>
    <para>
      Reboot your system after the command completes. The command installs the SELinux policy if it is not installed, sets the SELinux mode and rebuilts <literal>initrd</literal>.
    </para>
  </section>

  <section xml:id="sec-disable-selinux">
    <title>Disabling SELinux</title>
    <para>
You can disable SELinux by using the <literal>permissive</literal> mode (a recommended way) or disable it completely by setting the <literal>disabled</literal>. The modes can be changed permanently in the <filename>/etc/selinux/config</filename> or the <literal>permissive</literal> mode can be set temporary till the next reboot using the <command>setenforce</command> command.</para>
<para>
  To set the <literal>permissive</literal> mode temporary, run the following command:
  </para>
  <screen>&prompt.root;setenforce 0</screen>
  <para>
    To verify the correct mode, run the following command. The command should return <literal>permissive</literal>.
  </para>
  <screen>&prompt.root;getenforce</screen>
  <para>
To set the <literal>disabled</literal> or <literal>permissive</literal> mode permanently, in the file <filename>/etc/selinux/config</filename> change the value of <literal>SELINUX</literal> to <literal>disabled</literal> or <literal>permissive</literal> as follows:
    </para>
    <screen>SELINUX=disabled</screen>
  </section>


  <section xml:id="sec-managing-modes">
    <title>Commands for managing SELinux</title>
    <para>
      In the default deployment, regardless of the method, the commands for managing SELinux policies are not installed. To install the commands described further, run the following command:
    </para>
    <screen>&prompt.root;transactional-update pkg install policycoreutils-python-utils</screen>
    <section xml:id="sec-semanage-command">
      <title>The <command>semanage</command> command</title>
    </section>
    <section xml:id="sec-restorecon-command">
      <title>The <command>restorecon</command> command</title>
    </section>
  </section>

  <section xml:id="sec-working-policy">
    <title>SELinux policy</title>
  </section>

</article>
