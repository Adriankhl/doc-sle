<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook50-profile.xsl"
                 type="text/xml"
                 title="Profiling step"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>
<article xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="article-administration-slemicro" xml:lang="en">
 <title>Cockpit Guide</title>
 <info>
  <productnumber>&productnumber;</productnumber><productname>&productname;</productname><date>
<?dbtimestamp format="B d, Y"?></date>
  <abstract>
   <para>
    This guide describes the administration of &slem; using Cockpit.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker></dm:bugtracker>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <section xml:id="sec-about-cockpit">
  <title>About Cockpit</title>
  <para>
    Cockpit is a web-based graphical interface that enables you to manage most of the administration task from one place by using plugins. You do not need to create credentials for cockpit as by default Cockpit uses the same credentials that you use to login to your server. Cockpit uses APIs that already exist on the system without adding additional layer to your system.
  </para>
  <para>
    Cockpit enables you to perform the following tasks:
  </para>
  <itemizedlist>
    <listitem>
      <para>
        download container images and run containers
      </para>
    </listitem>
    <listitem>
      <para>
        update the server
      </para>
    </listitem>
    <listitem>
      <para>
        manage the server storage
      </para>
    </listitem>
    <listitem>
      <para>
        inspect and change network settings
      </para>
    </listitem>
    <listitem>
      <para>
        manage user accounts
      </para>
    </listitem>
    <listitem>
      <para>
        view system logs
      </para>
    </listitem>
    <listitem>
      <para>
        create and administer virtual machines
      </para>
    </listitem>
    <listitem>
      <para>
        inspect and interact with &systemd; services
      </para>
    </listitem>
    <listitem>
      <para>
        switching SELinux modes
      </para>
    </listitem>
    <listitem>
      <para>
        use a terminal on a remote server in your web browser
      </para>
    </listitem>
  </itemizedlist>
 </section>

<section xml:id="sec-getting-cockpit">
  <title>Getting Cockpit</title>
 </section>

<section xml:id="sec-authentication">
  <title>Cockpit authentication</title>
  <section xml:id="sec-authentication-login">
    <title>Authentication</title>
  </section>

<section xml:id="sec-overview">
  <title>Overview of your server</title>
  <para>
    The <guimenu>Overview</guimenu> pages provides information about the helath of your server, CPU and memory usage and hardware details too. On this page you can also change the host name, configure a system time and view SSH keys.
  </para>

  <figure xml:id="">
    <title>Server overview</title>
    <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_overview.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_overview.png" width="100%"/>
    </imageobject>
    <textobject role="description">
   <phrase>Cockpit networking</phrase>
  </textobject>
   </mediaobject>
  </figure>
  </section>

  <section xml:id="sec-cockpit-logs">
    <title>&slema; logs</title>
  </section>

  <section xml:id="sec-cockpit-storage">
    <title>Managing storage</title>
    <para>
      TBD
    </para>
  </section>

  <section xml:id="sec-cockpit-networking">
    <title>Managing networking</title>
    <para>
      After clicking <guimenu>Networking</guimenu> you can view traffic on your system, manage firewall, manage network interfaces or view network logs.
    </para>

    <figure xml:id="fig-networking">
          <title>Networking</title>
          <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_networking_plugin.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_networking_plugin.png" width="100%"/>
    </imageobject>
    <textobject role="description">
   <phrase>Cockpit networking</phrase>
  </textobject>
   </mediaobject>
        </figure>

<section xml:id="sec-networking-firewall">
  <title>Firewall</title>
  <important>
    <title>Firewall and Podman</title>
    <para>
       Using firewall along with Podman may result in missing Podman-relateds firewall rules after reloading the firewalld service. Therefore, it is recommended to keep the firewall in its default setting (disabled) if you intend to use Podman.
    </para>
  </important>
  <para>
  The <guimenu>Firewall</guimenu> part enables you turn on the firewall, which is off by default. After turning it on, you can edit firewall rules and zones by clicking <guimenu>Edit rules and zones</guimenu>
</para>
</section>

    <section xml:id="sec-networking-interfaces">
      <title>Interfaces</title>
      <para>
        From the <guimenu>Interfaces</guimenu> part, you can add, modify or delete VLANs, bridges or bond interfaces.
      </para>
      <section xml:id="sec-networking-bridges">
        <title>Managing bonds</title>
        <para>
          A bond interface is a combination of several network interfaces into one bond. Network bonding can increase performance by increasing the network throughput and bandwidth. To add a bond interface, click <guimenu>Add bond</guimenu>. 
        </para>        
        <figure xml:id="fig-adding-bond">
          <title>Adding a bond</title>
          <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_adding_bond.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_adding_bond.png" width="100%"/>
    </imageobject>
    <textobject role="description">
   <phrase>Cockpit adding bond</phrase>
  </textobject>
   </mediaobject>
        </figure>
        <para>
          Specify the following parameters of the bond interface:
        </para>
        <variablelist>
          <varlistentry>
            <term>Name</term>
            <listitem>
              <para>
                enter a unique name of the interface.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Interfaces</term>
            <listitem>
              <para>
                select which network interfaces should be group to the bond.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>MAC</term>
            <listitem>
              <para>
                You can either select a specific MAC address of the underlying interface, or you can use any of the following options:
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Mode</term>
            <listitem>
              <para>
                Keep the default mode or select any of the following modes:
              </para>
              <variablelist>
          <varlistentry>
            <term>Round Robin</term>
            <listitem>
              <para>
                Transfers packets from the first available interface to the last. The mode offers fault tolerance and load balancing.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Active Backup</term>
            <listitem>
              <para>
                Only one interface in the bonding is active. If the active interface fails, the backup will be activated.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Balance XOR</term>
            <listitem>
              <para>
                Balancing using a transmit hash policy. The default is a modulo device count. To select a different policy, specify the <literal>xmit_hash_policy</literal> option in the <guimenu>Option</guimenu> field.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Broadcast</term>
            <listitem>
              <para>
                Everything is transmitted on all interfaces.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>802.3ad Dynamic Link Aggregation</term>
            <listitem>
              <para>
                Creates aggregation groups that share the same speed and duplex settings.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Adaptive Transmit Load Balancing</term>
            <listitem>
              <para>
                Is a channel bonding that does not require any special switch support. The outgoing traffic is distributed according to the current load on each interface.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Adaptive Load Balancing</term>
            <listitem>
              <para>
                Includes adaptive transmit load balancing and receive load balancing, no special switch support is required.
              </para>
            </listitem>
          </varlistentry>
        </variablelist>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Primary</term>
            <listitem>
              <para>
                this selection is available only for the <emphasis>Active Backup</emphasis> mode. You can select a particular interface that will be used as primary, while other interfaces in the bond are used as secondary.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Link monitoring</term>
            <listitem>
              <para>
                select the type of link monitoring.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Monitoring interval</term>
            <listitem>
              <para>
                specifies the interval in which the particular link monitor performs checks. The value is in ms.
              </para>
            </listitem>
          </varlistentry>
          <!--
          <para>
            The following items depend on the selected link monitor.
          </para>
        -->
          <varlistentry>
            <term>Link up delay</term>
            <listitem>
              <para>
                define time in ms for how long the bond is disabled after a link has been activated. The value should be a multiple of the <guimenu>Monitoring interval</guimenu> value, otherwise it will be rounded to the nearest value. Available only for the MII link monitor.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Link down delay</term>
            <listitem>
              <para>
                define time in ms for how long the bond is disabled if a link failure has been detected. The value should be a multiple of the <guimenu>Monitoring interval</guimenu> value, otherwise it will be rounded to the nearest value. Available only for the MII link monitor.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Monitoring targets</term>
            <listitem>
              <para>
                specify a list of host IP addresses that you want to monitor. Available only for the ARP link monitor.
              </para>
            </listitem>
          </varlistentry>
        </variablelist>

        <para>
          To modify or delete a bond interface, click on the particular bond name to open the details. There you can change the parameters of the bond described below.  
        </para>
        <figure xml:id="fig-modifying-bond">
          <title>Modifying a bond</title>
          <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_modifying_bond.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_modifying_bond.png" width="100%"/>
    </imageobject>
    <textobject role="description">
   <phrase>Cockpit modifying bond</phrase>
  </textobject>
   </mediaobject>
        </figure>
        <variablelist>
          <varlistentry>
            <term>Bond </term>
            <listitem>
              <para>select a MAC address from the list.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>General</term>
            <listitem>
              <para>
                the bond connects automatically by default. Uncheck the box to disable the automatic connection.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>IPv4 and IPv6</term>
            <listitem>
              <para>after clicking <guimenu>edit</guimenu>, you can set IP adress and configure a specific DNS, DNS search domain and Routes.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>MTU</term>
            <listitem>
              <para>after clicking <guimenu>edit</guimenu>, you can specify a particular value of maximum transmission unit in bytes.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Bond</term>
            <listitem>
              <para>
                after clicking <guimenu>edit</guimenu>, you can edit the same parameters as when you were creating the bond interface.
              </para>
            </listitem>
          </varlistentry>
        </variablelist>
        </section>

        <section xml:id="sec-managing-bridge">
          <title>Managing bridges</title>
          <para>
            A network bridge is a device that creates a single aggredated network from multiple networks. To create a bridge, click <guimenu>Add bridge</guimenu>
          </para>
          <figure xml:id="fig-adding-bridge">
          <title>Adding a bridge</title>
          <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_adding_bridge.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_adding_bridge.png" width="100%"/>
    </imageobject>
    <textobject role="description">
   <phrase>Cockpit adding bridge</phrase>
  </textobject>
</mediaobject>
        </figure>
        <para>
          Specify the following:
        </para>
        <variablelist>
          <varlistentry>
            <term>Name</term>
            <listitem>
              <para>
                specify a unique name of the bridge.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Ports</term>
            <listitem>
              <para>
                select interfaces to be included in the bridge
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Spanning tree protocol (STP)</term>
            <listitem>
              <para>
                STP is a network protocol used for Ethernet networks that prevents bridge loops by setting a preferred link whenever network switches are connected with several links. This preferred link is used for all Ethernet traffic unless it fails. In that case a redundant link is used instead. For details regarding STP, see <link xlink:href="https://en.wikipedia.org/wiki/Spanning_Tree_Protocol">STP</link>.
              </para>
              <para>
                If you enable the STP protocol, then you can edit the following settings:
              </para>
              <variablelist>
                <varlistentry>
                  <term>STP priority</term>
                  <listitem>
                    <para>
                      the lower the priority, the higher the probability of the switch to become the root switch.
                    </para>
                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>STP forward delay</term>
                  <listitem>
                    <para>
                      specify the time spent in the listening and learning state (in seconds). The default value is 15&nbsp;s, but you can use any value between 4 and 30&nbsp;s.
                    </para>
                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>STP hello time</term>
                  <listitem>
                    <para>
                      specify the time between each bridge protocol data unit (BDPU) that is sent on a port (in seconds). The default value is 2&nbsp;s, but the recommended range is 1 to 10&nbsp;s.
                    </para>
                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>STP maximum message age</term>
                  <listitem>
                    <para>
                      specify the maximum length of time that passes before a bridge port saves its configuration BPDU information.
                    </para>
                  </listitem>
                </varlistentry>
                </variablelist>
            </listitem>
          </varlistentry>
        </variablelist>

        <para>
          To modify or delete a bridge, click the bridge name to open the details.  
        </para>
        <figure xml:id="fig-modifying-bridge">
          <title>Modifying a bridge</title>
          <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_modifying_bridge.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_modifying_bridge.png" width="100%"/>
    </imageobject>
    <textobject role="description">
   <phrase>Cockpit modifying bridge</phrase>
  </textobject>
  </mediaobject>
        </figure>
<para>
  There you can edit the following details:
</para>
<variablelist>
  <varlistentry>
    <term>General</term>
    <listitem>
      <para>
        the bridge connects automatically by default. To disable the automatic connection, uncheck the option.
      </para>
    </listitem>
  </varlistentry>
  <varlistentry>
            <term>IPv4 and IPv6</term>
            <listitem>
              <para>after clicking <guimenu>edit</guimenu>, you can set IP address and configure a specific DNS, DNS search domain and Routes.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Bridge</term>
            <listitem>
              <para>
                by clicking <guimenu>edit</guimenu>, you can edit all parametes of the bridge.
              </para>
            </listitem>
          </varlistentry>
  </variablelist>
        </section>
        
         <section xml:id="sec-managing-vlan">
          <title>Managing VLANs</title>
          <para>
            A virtual local area network is a logical subnetwork that groups devices from different physical LANs.
          </para>
          <para>
            To create a VLAN, click <guimenu>Add VLAN</guimenu> and select the parent interface, assign an ID number and provide a name for the VLAN.

          </para>

        <figure xml:id="fig-adding-vlan">
          <title>Adding VLAN</title>
          <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_adding_vlan.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_adding_vlan.png" width="100%"/>
    </imageobject>
    <textobject role="description">
   <phrase>Cockpit adding VLAN</phrase>
  </textobject>
  </mediaobject>
        </figure>
        <para>
          To modify or delete a VLAN, click the VLAN name.
        </para>
        <figure xml:id="fig-modifying-vlan">
          <title>Adding VLAN</title>
          <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_modifying_vlan.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_modifying_vlan.png" width="100%"/>
    </imageobject>
    <textobject role="description">
   <phrase>Cockpit adding VLAN</phrase>
  </textobject>
  </mediaobject>
        </figure>
      </section>
   

  <!-- Currently not available in 5.3
  <section xml:id="sec-networking-management">
        <title>Managing interfaces</title>
        <para>
          By default, the interfaces are started on boot and use DHCP to assign an IP address. However, you can configure an interface to start on other occassions and/or use a static IP address.
        </para>
        <para>
          The <guimenu>Interfaces</guimenu> view also enables you to delete an interface or disable it.
        </para>
      </section>
    </section>

    <section xml:id="sec-networking-routing">
      <title>Routing</title>
      <para>
        TBD
      </para>
    </section>

<section xml:id="sec-networking-dns">
  <title>DNS</title>
  <para>
        TBD
      </para>
</section>
-->
</section>
  </section>

  <section xml:id="sec-cockpit-containers">
    <title>Working with containers</title>
  </section>

  <section xml:id="sec-users-cockpit">
   <title>Users administration</title>
   <note>
    <title>Users administration only for server administrators</title>
    <para>
     Only users with the <guimenu>Server administrator</guimenu> role can edit
     other users.
    </para>
   </note>
   <para>
    Cockpit enables you to manage users of your system. Click
    <guimenu>Accounts</guimenu> to open the user administration page. Here you
    can create a new account by clicking <guimenu>Create new account</guimenu>
    or manage already existing accounts by clicking on the particular account.
   </para>
   <figure>
    <title>The <guimenu>Accounts</guimenu> screen</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cockpit_accounts_screen.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_accounts_screen.png" width="100%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <section xml:id="sec-adding-users">
    <title>Creating new accounts</title>
    <para>
     Click <guimenu>Create new account</guimenu> to open the window that
     enables you to add a new user. Fill in the user's login and/or full name
     and password, then confirm the form by clicking <guimenu>Create</guimenu>.
    </para>
    <para>
     To add authorized SSH keys for the new user or set the <guimenu>Server
     administrator</guimenu> role, edit the already created account by clicking
     on it. For details, refer to <xref linkend="sec-modifying-users"/>.
    </para>
   </section>
   <section xml:id="sec-modifying-users">
    <title>Modifying accounts</title>
    <para>
     After clicking the user icon in the <guimenu>Accounts</guimenu> page, the
     user details view opens and you can edit the user.
    </para>
    <figure>
     <title>User details</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="cockpit_user_details.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cockpit_user_details.png" width="100%"/>
      </imageobject>
     </mediaobject>
    </figure>
    <para>
     In the user's details view, you can perform the following actions.
    </para>
    <variablelist>
     <varlistentry>
      <term>Delete the user</term>
      <listitem>
       <para>
        Click <guimenu>Delete</guimenu> to remove the user from the system.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Terminate user's session</term>
      <listitem>
       <para>
        By clicking <guimenu>Terminate session</guimenu>, you can log out the
        particular user of the system.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Change user's role</term>
      <listitem>
       <para>
        By checking/unchecking the <guimenu>Server administrator</guimenu>
        check box, you can assign or remove the administrator role from the
        user.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Manage access to the account</term>
      <listitem>
       <para>
        You can lock the account or you can set a date when the account will
        expire.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Manage the user's password</term>
      <listitem>
       <para>
        Click <guimenu>Set password</guimenu> to set a new password for the
        account.
       </para>
       <para>
        By clicking <guimenu>Force change</guimenu>, the user will have to
        change the password on the next login.
       </para>
       <para>
        Click <guimenu>edit</guimenu> to set whether or when the password
        expires.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Add SSH key</term>
      <listitem>
       <para>
        You can add a SSH key for passwordless authentication via SSH. Click
        <guimenu>Add key</guimenu>, paste the contents of the public SSH key
        and confirm it by clicking <guimenu>Add</guimenu>.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </section>
  </section>

  <section xml:id="sec-cockpit-services">
    <title>Managing services</title>
  </section>

  <section xml:id="sec-selinux-plugin">
    <title>Managing SELinux mode and policy</title>
    <para>
      The SELinux tool enables you to switch between SELinux modes and view current modifications of the SELinux policy.
    </para>
    <para>
      On &slema; SELinux is in the permissive mode by default. To temporarily switch to the enforcing mode, click the button with the <literal>Permisive</literal> label. Bear in mind that the change persist pnly to the next boot. If you need to perform persistent change of the mode, edit the configuration file <filename>/etc/selinux/config</filename> as described in <xref linkend="sec-switching-modes"/>.
    </para>
    <para>
      The <guimenu>System modifications</guimenu> lists all modifications performed on the default SELinux policy. If you want to export the modifications and reuse them on different servers, click <guimenu>View automation script</guimenu>. In the new window you can copy a shell script or ansible configuration file that can be applied on other servers. 
    </para>
  </section>

  <section xml:id="sec-cockpit-updates">
    <title>Managing &slema; updates</title>
  </section>
 
</section>

</article>