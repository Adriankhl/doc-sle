<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="sle_update_online.xml" version="5.0" xml:id="cha-update-online">
 <title>Online-Aufrüstung</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>Ja</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    Für die Aufrüstung eines laufenden Systems auf ein neues Service Pack bietet SUSE ein intuitives grafisches Werkzeug und ein Befehlszeilenwerkzeug. Diese Funktionen unterstützen das <quote>Rollback</quote> von Service Packs und vieles mehr. In diesem Kapitel wird die Ausführung einer Service Pack-Aufrüstung mit diesen Werkzeugen Schritt für Schritt erläutert.
   </para>
  </abstract>
 </info>
 <sect1 xml:id="sec-update-migr-conceptual-overview">
  <title>Konzeptüberblick</title>

  <para>
   Vor dem Aufrüsten des Systems lesen Sie bitte zunächst <xref linkend="sec-update-prep"/>.
  </para>

  <para>
   SUSE veröffentlicht in regelmäßigen Abständen neue Service Packs für die SUSE Linux Enterprise-Produktfamilie. Um den Kunden die Migration auf ein neues Service Pack zu erleichtern und die Ausfallzeiten so kurz wie möglich zu halten, unterstützt SUSE eine Online-Migration bei laufendem System.
  </para>

  <para>
   Ab SLE 12 werden anstelle von YaST-Wagon die YaST-Migration (GUI) und die Zypper-Migration (Befehlszeile) verwendet. Folgende Funktionen werden unterstützt:
  </para>

  <itemizedlist>
   <listitem>
    <para>
     Das System befindet sich bis zur Aktualisierung des ersten RPM stets in einem definierten Status
    </para>
   </listitem>
   <listitem>
    <para>
     Der Vorgang kann bis zur Aktualisierung des ersten RPM jederzeit abgebrochen werden
    </para>
   </listitem>
   <listitem>
    <para>
     Unkomplizierte Wiederherstellung bei einem Fehler
    </para>
   </listitem>
   <listitem>
    <para>
     <quote>Rollback</quote> über Systemtools; keine Sicherung/Wiederherstellung erforderlich
    </para>
   </listitem>
   <listitem>
    <para>
     Verwendung aller aktiven Repositorys
    </para>
   </listitem>
   <listitem>
    <para>
     Möglichkeit zum Überspringen eines Service Packs
    </para>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 xml:id="sec-update-migr-workflow">
  <title>Arbeitsfluss der Service Pack-Migration</title>

  <para>
   Eine Service Pack-Migration kann mit YaST, <command>zypper</command> oder AutoYAST ausgeführt werden.
  </para>

  <para>
   Vor dem Start einer Service Pack-Migration muss das System beim SUSE Customer Center oder bei einem lokalen SMT-Server registriert werden. Auch SUSE Manager kann verwendet werden.
  </para>

  <para>
   Unabhängig von der Methode besteht eine Service Pack-Migration jedoch immer aus den folgenden Schritten:
  </para>

  <orderedlist>
   <listitem>
    <para>
     Suchen von möglichen Migrationszielen auf den registrierten Systemen
    </para>
   </listitem>
   <listitem>
    <para>
     Auswahl eines Migrationsziels
    </para>
   </listitem>
   <listitem>
    <para>
     Anfordern und Aktivieren neuer Repositorys
    </para>
   </listitem>
   <listitem>
    <para>
     Ausführen der Migration
    </para>
   </listitem>
  </orderedlist>



  <para>
   Die Liste der Migrationsziele ist abhängig von den installierten und registrierten Produkten. Falls Sie eine Erweiterung installiert haben, für die das neue Service Pack noch nicht zur Verfügung steht, wird Ihnen unter Umständen gar kein Migrationsziel angeboten.
  </para>

  <para>
   Die Liste der Migrationsziele, die für Ihren Host verfügbar sind, wird immer aus dem SUSE Customer Center abgerufen und hängt von den installierten Produkten oder Erweiterungen ab.
  </para>
 </sect1>
 <sect1 xml:id="sec-update-migr-cancel-spm">
  <title>Abbrechen einer Service Pack-Migration</title>

  <para>
   Während des Migrationsvorgangs kann eine Service Pack-Migration nur in ganz bestimmten Phasen abgebrochen werden:
  </para>

  <orderedlist>
   <listitem>
    <para>
     Bis zum Beginn des Paketupgrades erfolgen auf dem System nur minimale Änderungen, beispielsweise für Services und Repositorys. Stellen Sie <filename>/etc/zypp/repos.d/*</filename> wieder her, um zum vorherigen Zustand zurückzukehren.
    </para>
   </listitem>
   <listitem>
    <para>
     Nach Beginn des Paketupgrades können Sie mithilfe eines Snapper-Snapshots zum vorherigen Zustand zurückkehren (siehe <xref linkend="cha-snapper"/>).
    </para>
   </listitem>
   <listitem>
    <para>
     Nach der Auswahl des Migrationsziels ändert das SUSE Customer Center die Repository-Daten. Wenn Sie diesen Zustand manuell zurücksetzen möchten, verwenden Sie <command>SUSEConnect</command>
     <option> --rollback</option>.
    </para>
   </listitem>
  </orderedlist>
 </sect1>
 <sect1 xml:id="sec-update-migr-yast-onlinemigr">
  <title>Aufrüstung mit dem Werkzeug für die Online-Migration (YaST)</title>

  <para>
   Für eine Service Pack-Migration mit YaST verwenden Sie das Tool für die <guimenu>Online-Migration</guimenu>. YaST installiert standardmäßig keine Pakete aus Repositorys von Drittanbietern. Wurde ein Paket aus einem Repository eines Drittanbieters installiert, verhindert YaST, dass das Paket durch das gleiche Paket aus SUSE ersetzt wird.
  </para>

  <note>
   <title>Reduzieren des Installationsumfangs</title>
   <para>
    Bei der SP-Migration installiert YaST alle empfohlenen Pakete. Vor allem bei benutzerdefinierten Minimalinstallationen kann dies den Installationsumfang auf dem System beträchtlich erhöhen. 
   </para>
   <para>
    Möchten Sie dieses Standardverhalten ändern und nur erforderliche Pakete erlauben, passen Sie die Option <option>solver.onlyRequires</option> in <filename>/etc/zypp/zypp.conf</filename> an.
   </para>
<screen>solver.onlyRequires = true</screen>
   <para>
    Bearbeiten Sie auch die Datei <filename>/etc/zypp/zypper.conf</filename> und ändern Sie die Option <option>installRecommends</option>.
   </para>
   <screen>installRecommends=false</screen>
</note>

  <para>
   Dadurch ändert sich das Verhalten sämtlicher Paketvorgänge, z. B. Installationen von Patches oder neuen Paketen.
  </para>

  <para>
   Gehen Sie wie folgt vor, um die Service Pack-Migration zu starten:
  </para>

  <procedure xml:id="pro-update-migr-yast">
   <step>
    <para>
     Deaktivieren Sie alle nicht verwendeten Erweiterungen des Registrierungsservers, damit künftig keine Abhängigkeitskonflikte auftreten. Falls Sie eine Erweiterung übersehen, erkennt YaST später die nicht verwendeten Erweiterungs-Repositorys, die dann automatisch deaktiviert werden.
    </para>
   </step>
   <step>
    <para>
     Wenn Sie bei einer GNOME-Sitzung auf dem zu aktualisierenden Computer angemeldet sind, wechseln Sie zu einer Textkonsole. Die Aktualisierung aus einer GNOME-Sitzung heraus wird nicht empfohlen. Dies gilt nicht, wenn Sie über einen Remote-Computer angemeldet sind (es sei denn, Sie führen eine VNC-Sitzung mit GNOME aus).
    </para>
   </step>
   <step>
    <para>
     Als LTSS-Abonnement prüfen Sie, ob das LTSS-Erweiterungs-Repository aktiv ist.
    </para>
   </step>
   <step>
    <para>
     Führen Sie die YaST-Online-Aktualisierung aus, um die neuesten Paketaktualisierungen für Ihr System zu erhalten.
    </para>
   </step>
   <step>
    <para>
     Installieren Sie das Paket
     <package>yast2-migration</package>
     und seine abhängigen Komponenten (in YaST unter <menuchoice>
     <guimenu> Software</guimenu> <guimenu> Software installieren oder löschen</guimenu>
     </menuchoice>).
    </para>
   </step>
   <step>
    <para>
     Starten Sie YaST neu, damit das neu installierte Modul im Kontrollzentrum angezeigt wird.
    </para>
   </step>
   <step>
    <para>
     Wählen Sie in YaST die Option <guimenu>Online-Migration</guimenu>. (Je nach der aufzurüstenden Version von <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> befindet sich dieses Modul unter <guimenu>System</guimenu> oder <guimenu>Software</guimenu>.) YaST zeigt die möglichen Migrationsziele und eine Zusammenfassung an. Falls für Ihr System mehrere Migrationsziele verfügbar sind, wählen Sie eines davon in der Liste aus.
    </para>
   </step>
   <step>
    <para>
     Wählen Sie ein Migrationsziel in der Liste aus und setzen Sie den Vorgang mit <guimenu>Weiter</guimenu> fort.
    </para>
   </step>
   <step>
    <para>
     Falls das Migrationstool Aktualisierungs-Repositorys anbietet, sollten Sie mit <guimenu>Ja</guimenu> fortfahren.
    </para>
   </step>
   <step>
    <para>
     <remark>toms 2015-09-09: FATE#319140</remark> Falls das Tool für die Online-Migration alte Repositorys von DVD oder einem lokalen Server findet, empfiehlt es sich dringend, diese zu deaktivieren. Alte Repositorys stammen aus einem früheren SP. Alle alten Repositorys aus SCC oder SMT werden automatisch entfernt.
    </para>
   </step>
   <step>
    <para>
     Prüfen Sie die Zusammenfassung und klicken Sie dann auf <guimenu>Weiter</guimenu>, um mit der Migration fortzufahren. Bestätigen Sie die Migration mit <guimenu>Aktualisierung starten</guimenu>.
    </para>
    <remark>toms 2016-07-13: What to do in case of problems?</remark>
   </step>
   <step>
    <para>
     Starten Sie Ihr System nach einer erfolgreichen Migration neu.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-update-migr-zypper-onlinemigr">
  <title>Aufrüstung mit zypper</title>

  <para>
   Für eine Service Pack-Migration mit Zypper verwenden Sie das Kommandozeilenwerkzeug <command>zypper</command> <option> migration</option> im Paket
   <package>zypper-migration-plugin</package>.
  </para>

  <note>
   <title>Reduzieren des Installationsumfangs</title>
   <para>
    Bei der SP-Migration installiert YaST alle empfohlenen Pakete. Vor allem bei benutzerdefinierten Minimalinstallationen kann dies den Installationsumfang auf dem System beträchtlich erhöhen. 
   </para>
   <para>
    Möchten Sie dieses Standardverhalten ändern und nur erforderliche Pakete erlauben, passen Sie die Option <option>solver.onlyRequires</option> in <filename>/etc/zypp/zypp.conf</filename> an.
   </para>
<screen>solver.onlyRequires = true</screen>
   <para>
    Bearbeiten Sie auch die Datei <filename>/etc/zypp/zypper.conf</filename> und ändern Sie die Option <option>installRecommends</option>.
   </para>
   <screen>installRecommends=false</screen>
  </note>

  <para>
   Dadurch ändert sich das Verhalten sämtlicher Paketvorgänge, z. B. Installationen von Patches oder neuen Paketen. Wenn Sie das Verhalten von Zypper für einen einzelnen Aufruf ändern möchten, fügen Sie in Ihrer Kommandozeile den Parameter <option>--no-recommends</option> hinzu.
  </para>

  <para>
   Gehen Sie wie folgt vor, um die Service Pack-Migration zu starten:
  </para>

  <procedure xml:id="pro-update-migr-zypper">
   <step>
    <para>
     Wenn Sie bei einer GNOME-Sitzung auf dem zu aktualisierenden Computer angemeldet sind, wechseln Sie zu einer Textkonsole. Die Aktualisierung aus einer GNOME-Sitzung heraus wird nicht empfohlen. Dies gilt nicht, wenn Sie über einen Remote-Computer angemeldet sind (es sei denn, Sie führen eine VNC-Sitzung mit GNOME aus).
    </para>
   </step>
   <step>
    <para>
     Falls noch nicht erfolgt, registrieren Sie Ihren SUSE Linux Enterprise-Rechner:
    </para>
<screen>sudo <command>SUSEConnect</command> --regcode <replaceable>YOUR_REGISTRATION_CODE</replaceable></screen>
   </step>
   <step>
    <para>
     Als LTSS-Abonnement prüfen Sie, ob das LTSS-Erweiterungs-Repository aktiv ist.
    </para>
   </step>
   <step>
    <para>
     Installieren Sie die neuesten Aktualisierungen:
    </para>
<screen>sudo <command>zypper</command> patch</screen>
   </step>
   <step>
    <para>
     Installieren Sie das Paket <package>zypper-migration-plugin</package> und dessen Abhängigkeiten:
    </para>
<screen>sudo <command>zypper</command> in zypper-migration-plugin</screen>
   </step>
   <step>
    <para>
     Führen Sie <command>zypper</command> <option> migration</option> aus:
    </para>
<screen><prompt>tux &gt; </prompt>sudo <command>zypper</command> migration
Executing 'zypper  patch-check'

Refreshing service 'SUSE_Linux_Enterprise_Server_12_x86_64'.
Loading repository data...
Reading installed packages...
0 patches needed (0 security patches)

Available migrations:

    1 | SUSE Linux Enterprise Server 12 SP1 x86_64
    2 | SUSE Linux Enterprise Server 12 SP2 x86_64</screen>
    <para>
     Beachten Sie folgende Hinweise zum Migrationsvorgang:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       Falls für Ihr System mehrere Migrationsziele verfügbar sind, können Sie in Zypper einen SP in der Liste auswählen. Dies entspricht dem Überspringen eines oder mehrerer SPs. Denken Sie daran, dass die Online-Migration für Basisprodukte (SLES, SLED) nur zwischen den SPs einer Hauptversion verfügbar ist.
      </para>
     </listitem>
     <listitem>
      <para>
       Zypper verwendet standardmäßig die Option <option>--no-allow-vendor-change</option>, die an <command>zypper</command> <option>dup</option> weitergeleitet wird. Wurde ein Paket aus einem Repository eines Drittanbieters installiert, verhindert diese Option, dass das Paket durch das gleiche Paket aus SUSE ersetzt wird.
      </para>
     </listitem>
     <listitem>
      <para>
       <remark>toms 2015-09-09: FATE#319140</remark> Falls Zypper alte Repositorys von DVD oder einem lokalen Server findet, empfiehlt es sich dringend, diese zu deaktivieren. Alte SCC- oder SMT-Repositorys werden automatisch entfernt.
      </para>
     </listitem>
    </itemizedlist>
   </step>
   <step>
    <para>
     Prüfen Sie alle Änderungen, insbesondere die Pakete, die entfernt werden. Geben Sie <literal>y</literal> ein, um fortzufahren (die Anzahl der Pakete, die aktualisiert werden können, ist von System zu System unterschiedlich):
    </para>
<screen>266 packages to upgrade, 54 to downgrade, 17 new, 8 to reinstall, 5 to remove, 1 to change arch.
Overall download size: 285.1 MiB. Already cached: 0 B  After the operation, additional 139.8 MiB will be used.
Continue? [y/n/? shows all options] (y):</screen>
    <para>
     Verwenden Sie zum Blättern in Ihrer Shell die Tasten <keycombo> <keycap function="shift"/> <keycap function="pageup"/>
     </keycombo>    oder <keycombo> <keycap function="shift"/>
     <keycap function="pagedown"/> </keycombo>   .
    </para>
   </step>
   <step>
    <para>
     Starten Sie Ihr System nach einer erfolgreichen Migration neu.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-update-migr-plainzypper-onlinemigr">
  <title>Aufrüstung mit einfachem Zypper</title>

  <para>
   Wenn Sie die YaST-Migration oder die Zypper-Migration nicht verwenden können, haben Sie die Möglichkeit, die Migration mit einer einfachen Zypper-Version (Plain Zypper) und einigen manuellen Interaktionen durchzuführen. Gehen Sie wie folgt vor, um eine Service Pack-Migration zu starten:
  </para>

  <procedure>
   <step>
    <para>
     Wenn Sie bei einer GNOME-Sitzung auf dem zu aktualisierenden Computer angemeldet sind, wechseln Sie zu einer Textkonsole. Die Aktualisierung aus einer GNOME-Sitzung heraus wird nicht empfohlen. Dies gilt nicht, wenn Sie über einen Remote-Computer angemeldet sind (es sei denn, Sie führen eine VNC-Sitzung mit GNOME aus).
    </para>
   </step>
   <step>
    <para>
     Aktualisieren Sie die Paketverwaltungstools mit den alten SUSE Linux Enterprise-Repositorys:
    </para>
<screen>sudo <command>zypper</command> patch --updatestack-only</screen>
   </step>
   <step>
    <para>
     Wenn das System registriert wurde, muss seine Registrierung aufgehoben werden:
    </para>
<screen>sudo <command>SUSEConnect</command> --de-register</screen>
   </step>
   <step>
    <para>
     Entfernen Sie die alten Installationsquellen und Repositorys und passen Sie die Repositorys von Drittanbietern an.
    </para>
   </step>
   <step>
    <para>
     Fügen Sie die neuen Installationsquellen – ob lokale oder Remote-Quellen – hinzu (Informationen zum Platzhalter <replaceable>REPOSITORY</replaceable> finden Sie unter <xref linkend="sec-update-nmm-repositories"/>):
    </para>
<screen>sudo <command>zypper</command> addrepo <replaceable>REPOSITORY</replaceable></screen>
    <para>
     Sie können auch das SUSE Customer Center oder das Subscription Management Tool verwenden. Das Kommando für SUSE Linux Enterprise 12 SP1 unter x86-64 lautet wie folgt:
    </para>
<screen>sudo <command>SUSEConnect</command> -p SLES/12.2/x86_64 <replaceable>OPTIONS</replaceable></screen>
    <para>
     Denken Sie daran, dass architekturübergreifende Upgrades nicht unterstützt werden.
    </para>
    <para>
     Zypper zeigt einen eventuellen Konflikt zwischen dem bisherigen und dem neuen Kernel an. Zum Fortsetzen wählen Sie Lösung 1.
    </para>
<screen>Problem: product:SLES-12.2-0.x86_64 conflicts with kernel &lt; 4.4 provided by kernel-default-<replaceable>VERSION</replaceable>
 Solution 1: Following actions will be done:
  replacement of kernel-default-<replaceable>VERSION</replaceable> with kernel-default-<replaceable>VERSION</replaceable>
  deinstallation of kernel-default-<replaceable>VERSION</replaceable>
 Solution 2: do not install product:SLES-12.2-0.x86_64
</screen>
   </step>
   <step>
    <para>
     Schließen Sie die Migration ab:
    </para>
<screen>sudo <command>zypper</command> ref -f -s
sudo <command>zypper</command> dup --no-allow-vendor-change --no-recommends</screen>
    <para>
     Das erste Kommando aktualisiert alle Services und Repositorys. Das zweite Kommando führt ein Distributionsupgrade durch. Hier sind die beiden letzten Optionen wichtig: <option>-no-allow-vendor-change</option> stellt sicher, dass RPMs von Drittanbietern keine RPMs aus dem Basissystem überschreiben. Die Option <option>--no-recommends</option> sorgt dafür, dass Pakete, die während der Erstinstallation abgewählt wurden, nicht erneut hinzugefügt werden.
    </para>
   </step>
  </procedure>
 </sect1>



 <sect1 xml:id="sec-update-migr-rollback">
  <title>Rollback eines Service Packs</title>

  <para>
   Falls ein Service Pack nicht ordnungsgemäß ausgeführt wurde, unterstützt SUSE Linux Enterprise die Zurücksetzung des Systems auf den Zustand vor Beginn der Service Pack-Migration. Voraussetzung hierfür ist eine Btrfs-Root-Partition mit aktivierten Snapshots (beim Installieren von SLES 12 standardmäßig aktiviert). Weitere Informationen finden Sie in <xref linkend="cha-snapper"/>.
  </para>

  <procedure xml:id="pro-update-migr-rollback">
   <step>
    <para>
     Rufen Sie eine Liste sämtlicher Snapper-Snapshots ab:
    </para>
    <screen>sudo snapper list</screen>
    <para>
     Suchen Sie in der Ausgabe nach dem Snapshot, der unmittelbar vor Beginn der Service Pack-Migration gestartet wurde. Die Spalte <guimenu>Beschreibung</guimenu> zeigt eine zugehörige Erläuterung und der Snapshot wird in der Spalte <guimenu>Benutzerdaten</guimenu> als <literal>wichtig</literal> gekennzeichnet. Notieren Sie die Snapshot-Nummer in der Spalte <guimenu>Nr.</guimenu> und das entsprechende Datum in der Spalte <guimenu>Datum</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Booten Sie das System neu. Wählen Sie im Bootmenü die Option <guimenu>Bootloader von einem schreibgeschützten Snapshot starten</guimenu> und wählen Sie den Snapshot mit dem notierten Datum und der Nummer aus dem vorangegangenen Schritt aus. Ein zweites Bootmenü (das Bootmenü aus dem Snapshot) wird geladen. Wählen Sie den Eintrag aus, der mit <literal>SLES 12</literal> beginnt, und booten Sie ihn.
    </para>
   </step>
   <step>
    <para>
     Das System bootet im vorherigen Zustand, wobei die Systempartition schreibgeschützt eingehängt ist. Melden Sie sich als <systemitem class="username">root</systemitem> an und prüfen Sie, ob Sie den richtigen Snapshot ausgewählt haben. Prüfen Sie außerdem, ob alle Vorgänge wie erwartet ablaufen. Beachten Sie, dass der Funktionsumfang ggf. eingeschränkt ist, da das Root-Dateisystem schreibgeschützt eingehängt wurde.
    </para>
    <para>
     Falls Probleme auftreten oder Sie den falschen Snapshot gebootet haben, booten Sie das System neu und wählen Sie einen anderen Snapshot zum Booten aus. Bis zu diesem Zeitpunkt wurden noch keine permanenten Änderungen vorgenommen. Falls der richtige Snapshot ausgewählt wurde und dieser Snapshot einwandfrei arbeitet, lassen Sie die Änderungen mit dem folgenden Befehl dauerhaft in Kraft treten:
    </para>
    <screen>snapper rollback</screen>
    <para>
     Booten Sie anschließend neu. Wählen Sie im Bootbildschirm den Standard-Booteintrag. Das neu eingesetzte System wird erneut gebootet.
    </para>
   </step>
   <step>
    <para>
     Prüfen Sie, ob die Repository-Konfiguration ordnungsgemäß zurückgesetzt wurde. Prüfen Sie außerdem, ob alle Produkte fehlerfrei registriert wurden. Falls eine dieser Bedingungen nicht erfüllt ist, kann das System später eventuell nicht mehr aktualisiert werden oder das System wird mit den falschen Paket-Repositorys aktualisiert.
    </para>
    <para>
     Prüfen Sie vor Beginn dieses Verfahrens, ob das System auf das Internet zugreifen kann.
    </para>
    <substeps>
     <step>
      <para>
       Aktualisieren Sie die Dienste und Repositorys mit
      </para>
      <screen>sudo zypper ref -fs</screen>
     </step>
     <step>
      <para>
       Erstellen Sie eine Liste der aktiven Repositorys mit
      </para>
      <screen>sudo zypper lr</screen>
      <para>
       Prüfen Sie die Ausgabe dieses Befehls sorgfältig. Es sollten keine Dienste und Repositorys aufgelistet werden, die für die Aktualisierung eingefügt wurden. Wenn Sie beispielsweise ein Rollback einer Service Pack-Migration von SLES 12 SP1 auf SLES 12 SP2 vornehmen, darf diese Liste <emphasis>nicht</emphasis> die Repositorys <literal>SLES12-SP2-Pool</literal> und <literal>SLES12-SP2-Updates</literal> enthalten, sondern muss die <literal>SP1</literal>-Versionen aufweisen.
      </para>
      <para>
       Falls falsche Repositorys aufgelistet werden, löschen Sie diese Repositorys und ersetzen Sie sie ggf. durch die richtigen Versionen für die Produkt- oder Service Pack-Version. Eine Liste der Repositorys für die unterstützten Migrationspfade finden Sie unter <xref linkend="sec-update-nmm-repositories"/>.
      </para>
     </step>
     <step>
      <para>
       Prüfen Sie abschließend den Registrierungsstatus aller installierten Produkte mit
      </para>
      <screen>SUSEConnect --status</screen>
      <para>
       Alle Produkte sollten als <literal>Registriert</literal> aufgeführt werden. Ist dies nicht der Fall, reparieren Sie die Registrierung mit
      </para>
      <screen>SUSEConnect --rollback</screen>
     </step>
    </substeps>
   </step>
  </procedure>
  <para>
   Damit haben Sie das System wieder auf den Zustand zurückgesetzt, der vor Beginn der Service Pack-Migration vorlag.
  </para>
 </sect1>
</chapter>
