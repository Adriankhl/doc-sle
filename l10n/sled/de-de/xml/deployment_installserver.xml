<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_installserver.xml" version="5.0" role="General" xml:id="cha-deployment-instserver">
 <title>Einrichten des Servers, auf dem sich die Installationsquellen befinden</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>Ja</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  Für die Installation von <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> stehen zahlreiche Verfahren zur Auswahl. Abgesehen von der normalen Medieninstallation, die in <xref linkend="cha-inst"/> beschrieben wird, können Sie aus mehreren netzwerkbasierten Ansätzen auswählen oder eine vollautomatische Installation von <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> ausführen.
 </para>
 <para>
  Die einzelnen Methoden werden über zwei kurze Checklisten eingeführt: In einer werden die Voraussetzungen für diese Methoden aufgeführt, in der anderen die grundlegenden Verfahren dargestellt. Anschließend werden alle in diesen Installationsszenarien verwendeten Techniken ausführlicher erläutert.
 </para>
 <note>
  <title>Terminologie</title>
  <para>
   In den folgenden Abschnitten wird das System, auf dem Ihre neue <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>-Installation ausgeführt wird, als <emphasis>Zielsystem</emphasis> oder <emphasis>Installationsziel</emphasis> bezeichnet. Der Begriff <emphasis>Repository</emphasis> (früher <quote>Installationsquelle</quote> genannt) wird für alle Quellen der Installationsdaten verwendet. Dazu gehören physische Medien, z. B. CD und DVD, sowie Netzwerkserver, die die Installationsdaten im Netzwerk verteilen.
  </para>
 </note>
 <para>
  Je nachdem, welches Betriebssystem auf dem Computer ausgeführt wird, der als Netzwerk-Installationsquelle für <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> verwendet werden soll, stehen für die Serverkonfiguration mehrere Möglichkeiten zur Verfügung. Am einfachsten lässt sich ein Installationsserver mit YaST auf SUSE Linux Enterprise Server 11/openSUSE 11.1 oder höher einrichten.
 </para>
 <tip>
  <title>Betriebssystem des Installationsservers</title>
  <para>
   Für die Linux-Implementierung kann auch ein Microsoft Windows-Computer als Installationsserver verwendet werden. Weitere Informationen finden Sie in <xref linkend="sec-deployment-instserver-smb"/>.
  </para>
 </tip>
 <sect1 xml:id="sec-deployment-instserver-sles9">
  <title>Einrichten eines Installationsservers mithilfe von YaST</title>

  <para>
   YaST bietet ein grafisches Werkzeug zum Erstellen von Repositorys. Es unterstützt HTTP-, FTP- und NFS-Netzwerk-Installationsserver.
  </para>

  <procedure xml:id="proc-deployment-instserver-sles9">
   <step>
    <para>
     Melden Sie sich bei dem Computer, der als Installationsserver verwendet werden soll, als <systemitem class="username">root</systemitem> an.
    </para>
   </step>
   <step>
    <para>
     Starten Sie <menuchoice> <guimenu>YaST</guimenu>
     <guimenu>Verschiedenes</guimenu> <guimenu>Installationsserver</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Wählen Sie den gewünschten Repositorytyp (HTTP, FTP oder NFS). Der ausgewählte Dienst wird bei jedem Systemstart automatisch gestartet. Wenn ein Dienst des ausgewählten Typs auf dem System bereits ausgeführt wird und Sie diesen Dienst für den Server manuell konfigurieren möchten, deaktivieren Sie die automatische Konfiguration des Serverdiensts, indem Sie <guimenu>Keine Netzwerkdienste konfigurieren</guimenu> wählen. Geben Sie in beiden Fällen das Verzeichnis an, in dem die Installationsdaten auf dem Server zur Verfügung gestellt werden sollen.
    </para>
   </step>
   <step>
    <para>
     Konfigurieren Sie den erforderlichen Repositorytyp. Dieser Schritt bezieht sich auf die automatische Konfiguration der Serverdienste. Wenn die automatische Konfiguration deaktiviert ist, wird dieser Schritt übersprungen.
    </para>
    <para>

     Legen Sie einen Aliasnamen für das root-Verzeichnis auf dem FTP- oder HTTP-Server fest, in dem die Installationsdaten gespeichert werden sollen. Das Repository befindet sich später unter <literal>ftp://<replaceable>Server-IP</replaceable>/<replaceable>Alias</replaceable>/<replaceable>Name</replaceable></literal> (FTP) oder unter <literal>http://<replaceable>Server-IP</replaceable>/<replaceable>Alias</replaceable>/<replaceable>Name</replaceable></literal> (HTTP). <replaceable>Name</replaceable> steht für den Namen des Repositorys, das im folgenden Schritt definiert wird. Wenn Sie im vorherigen Schritt NFS ausgewählt haben, legen Sie Platzhalter und Exportoptionen fest. Der Zugriff auf den NFS-Server erfolgt über <literal>nfs://<replaceable>Server-IP</replaceable>/<replaceable>Name</replaceable></literal>. Informationen zu NFS und Exportvorgängen finden Sie in <xref linkend="cha-nfs"/>.
    </para>
    <tip>
     <title>Firewall-Einstellungen</title>
     <para>
      Stellen Sie sicher, dass die Firewall-Einstellungen Ihres Server-Systems Datenverkehr an den entsprechenden Ports für HTTP, NFS und FTP erlauben. Ist dies nicht der Fall, aktivieren Sie zuvor <guimenu>Firewall-Port öffnen</guimenu> oder <guimenu>Firewall-Details</guimenu>.
     </para>
    </tip>
   </step>
   <step>
    <para>
     Konfigurieren Sie das Repository. Bevor die Installationsmedien in ihr Zielverzeichnis kopiert werden, müssen Sie den Namen des Repositorys angeben (dies sollte im Idealfall eine leicht zu merkende Abkürzung des Produkts und der Version sein). YaST ermöglicht das Bereitstellen von ISO-Images der Medien an Stelle von Kopien der Installations-DVDs. Wenn Sie diese Funktion verwenden möchten, aktivieren Sie das entsprechende Kontrollkästchen und geben Sie den Verzeichnispfad an, in dem sich die ISO-Dateien lokal befinden. Abhängig vom Produkt, das über diesen Installationsserver verteilt werden soll, müssen Sie ggf. weitere Medien als zusätzliche Repositorys hinzufügen, z. B. ServicePack-DVDs. Um den Installationsserver über OpenSLP im Netzwerk bekannt zu geben, aktivieren Sie die entsprechende Option.
    </para>
    <tip>
     <title>Bekanntgabe des Repositorys</title>
     <para>
      Wenn Ihr Netzwerk diese Option unterstützt, sollten Sie Ihr Repository auf jeden Fall über OpenSLP bekannt machen. Dadurch ersparen Sie sich die Eingabe des Netzwerk-Installationspfads auf den einzelnen Zielcomputern. Die Zielsysteme werden unter Verwendung der SLP-Boot-Option gebootet und finden das Netzwerk-Repository ohne weitere Konfigurationsschritte. Weitere Informationen zu dieser Option finden Sie in <xref linkend="sec-deployment-remoteinst-bootinst"/>.
     </para>
    </tip>
   </step>
   <step>
    <para>
     Konfiguration weiterer Repositorys. In YaST gilt eine bestimmte Namenskonvention für die Konfiguration von Repositorys mit Zusatz-CDs oder Service Pack-CDs. Die Konfiguration wird nur akzeptiert, wenn dem Repository-Namen der Zusatz-CDs der Repository-Name der Installationsmedien vorangestellt ist. Wenn Sie also beispielsweise <literal>SLES12SP1</literal> als Repository-Namen für DVD1 wählen, sollten Sie den Repository-Namen <literal>SLES12SP1addon</literal> für DVD2 verwenden. Dies gilt auch für SDK-CDs.
    </para>
   </step>
   <step>
    <para>
     Laden Sie die Installationsdaten hoch. Der die meiste Zeit in Anspruch nehmende Schritt bei der Konfiguration eines Installationsservers ist das Kopieren der eigentlichen Installations-DVDs. Legen Sie die Medien in der von YaST angegebenen Reihenfolge ein und warten Sie, bis der Kopiervorgang abgeschlossen ist. Wenn alle Quellen erfolgreich kopiert wurden, kehren Sie zur Übersicht der vorhandenen Repositorys zurück und schließen Sie die Konfiguration, indem Sie <guimenu>Verlassen</guimenu> wählen.
    </para>
    <para>
     Der Installationsserver ist jetzt vollständig konfiguriert und betriebsbereit. Er wird bei jedem Systemstart automatisch gestartet. Es sind keine weiteren Aktionen erforderlich. Sie müssen diesen Dienst lediglich ordnungsgemäß manuell konfigurieren und starten, wenn die automatische Konfiguration der ausgewählten Netzwerkdienste mit YaST anfänglich deaktiviert wurde.
    </para>
   </step>
  </procedure>

  <para>
   Wählen Sie zum Deaktivieren eines Repositorys das zu entfernende Repository aus und wählen Sie dann <guimenu>Löschen</guimenu>. Die Installationsdaten werden vom System entfernt. Um den Netzwerkdienst zu deaktivieren, verwenden Sie das entsprechende YaST-Modul.
  </para>

  <para>
   Wenn der Installationsserver die Installationsdaten für mehrere Produkte einer Produktversion zur Verfügung stellen soll, starten Sie das YaST -Installationservermodul, und wählen Sie in der Übersicht der vorhandenen Repositorys die Option <guimenu>Hinzufügen</guimenu>, um das neue Repository zu konfigurieren.
  </para>
 </sect1>
 <sect1 xml:id="sec-deployment-instserver-nfs">
  <title>Manuelles Einrichten eines NFS-Repositorys</title>

  <important os="sled">
   <para>
    Es wird davon ausgegangen, dass ein SUSE Linux-basiertes Betriebssystem auf dem Computer ausgeführt wird, der als Installationsserver dienen soll. Ist dies nicht der Fall, verwenden Sie anstatt der folgenden Anweisungen die NFS-Dokumentation des Herstellers, dessen Produkt Sie verwenden.
   </para>
  </important>

  <para>
   Das Einrichten einer NFS-Quelle für die Installation erfolgt in zwei Hauptschritten. Im ersten Schritt erstellen Sie die Verzeichnisstruktur für die Installationsdaten und kopieren diese in die Struktur. Im zweiten Schritt exportieren Sie das Verzeichnis mit den Installationsdaten in das Netzwerk.
  </para>

  <procedure xml:id="proc-deployment-instserver-nfs-cdir">
   <para>
    Gehen Sie wie folgt vor, um ein Verzeichnis für die Installationsdaten zu erstellen:
   </para>
   <step>
    <para>
     Melden Sie sich als <systemitem class="username">root</systemitem>-Benutzer an.
    </para>
   </step>
   <step>
    <para>
     Erstellen Sie ein Verzeichnis, in dem die Installationsdaten gespeichert werden sollen, und wechseln Sie in dieses Verzeichnis. Beispiel:
    </para>
<screen><prompt role="root">root # </prompt>mkdir /srv/install/<replaceable>product</replaceable>/<replaceable>productversion</replaceable>
<prompt role="root">root # </prompt>cd /srv/install/<replaceable>product</replaceable>/<replaceable>productversion</replaceable></screen>
    <para>
     Ersetzen Sie <replaceable>Produkt</replaceable> durch eine Abkürzung des Produktnamens und <replaceable>Produktversion</replaceable> durch eine Zeichenkette, die den Produktnamen und die Version enthält.
    </para>
   </step>
   <step>
    <para>
     Führen Sie für die einzelnen im Medienkit enthaltenen DVDs die folgenden Kommandos aus:
    </para>
    <substeps performance="required">
     <step>
      <para>
       Kopieren Sie den gesamten Inhalt der Installations-DVD in das Server-Installationsverzeichnis:
      </para>
<screen><prompt role="root">root # </prompt>cp -a /media/<replaceable>path_to_your_DVD_drive .</replaceable></screen>
      <para>
       Ersetzen Sie <replaceable>path_to_your_DVD_drive</replaceable> durch den tatsächlichen Pfad, in dem sich das DVD-Laufwerk befindet. Dies kann je nach Laufwerktyp, der auf dem System verwendet wird, <filename>cdrom</filename>, <filename>cdrecorder</filename>, <filename>dvd</filename> oder <filename>dvdrecorder</filename> sein.
      </para>
     </step>
     <step>
      <para>
       Benennen Sie das Verzeichnis in die DVD-Nummer um:
      </para>
<screen><prompt role="root">root # </prompt>mv <replaceable>path_to_your_DVD_drive</replaceable> DVD<replaceable>x</replaceable></screen>
      <para>
       Ersetzen Sie <replaceable>x</replaceable> durch die Nummer der DVD.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>

  <procedure xml:id="proc-deployment-instserver-nfs-export">
   <para>
    In <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> können Sie das Repository mit NFS unter Verwendung von YaST exportieren. Führen Sie dazu die folgenden Schritte aus:
   </para>
   <step>
    <para>
     Melden Sie sich als <systemitem class="username">root</systemitem>-Benutzer an.
    </para>
   </step>
   <step>
    <para>
     Starten Sie <menuchoice> <guimenu>YaST</guimenu> <guimenu>Netzwerkdienste</guimenu> <guimenu>NFS-Server</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Wählen Sie <guimenu>Starten</guimenu> und <guimenu>Firewall-Port öffnen</guimenu> und klicken Sie auf <guimenu>Weiter</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Wählen Sie <guimenu>Verzeichnis hinzufügen</guimenu> und navigieren Sie zum Verzeichnis mit den Installationsquellen, in diesem Fall <filename><replaceable>Produktversion</replaceable></filename>.
    </para>
   </step>
   <step>
    <para>
     Wählen Sie <guimenu>Host hinzufügen</guimenu>, und geben Sie die Hostnamen der Computer ein, auf die die Installationsdaten exportiert werden sollen. An Stelle der Hostnamen können Sie hier auch Platzhalter, Netzwerkadressbereiche oder den Domänennamen Ihres Netzwerks eingeben. Geben Sie die gewünschten Exportoptionen an oder übernehmen Sie die Vorgabe, die für die meisten Konfigurationen ausreichend ist. Weitere Informationen dazu, welche Syntax beim Exportieren von NFS-Freigaben verwendet wird, finden Sie auf der man-Seite zu <systemitem>exports</systemitem>.
    </para>
   </step>
   <step>
    <para>
     Klicken Sie auf <guimenu>Verlassen</guimenu>. Der NFS-Server, auf dem sich das <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>-Repository befindet, wird automatisch gestartet und in den Bootvorgang integriert.
    </para>
   </step>
  </procedure>

  <procedure xml:id="proc-deployment-instserver-nfs-exportman">
   <para>
    Wenn Sie die Repositorys nicht mit dem YaST-NFS-Servermodul, sondern manuell exportieren möchten, gehen Sie wie folgt vor:
   </para>
   <step>
    <para>
     Melden Sie sich als <systemitem class="username">root</systemitem>-Benutzer an.
    </para>
   </step>
   <step>
    <para>
     Öffnen Sie die Datei <filename>/etc/exports</filename> und geben Sie die folgende Zeile ein:
    </para>
<screen>/<replaceable>productversion</replaceable> *(ro,root_squash,sync)</screen>
    <para>
     Dadurch wird das Verzeichnis <filename>/<replaceable>Produktversion</replaceable></filename> auf alle Hosts exportiert, die Teil dieses Netzwerks sind oder eine Verbindung zu diesem Server herstellen können. Um den Zugriff auf diesen Server zu beschränken, geben Sie an Stelle des allgemeinen Platzhalters <literal>*</literal> Netzmasken oder Domänennamen an. Weitere Informationen hierzu finden Sie auf der man-Seite für den Befehl <systemitem>export</systemitem>. Speichern und schließen Sie diese Konfigurationsdatei.
    </para>
   </step>
   <step>
    <para>
     Um den NFS-Dienst zu der beim Booten des System generierten Liste der Server hinzuzufügen, führen Sie die folgenden Befehle aus:
    </para>
<screen><prompt role="root">root # </prompt>systemctl enable nfsserver</screen>
   </step>
   <step>
    <para>
     Starten Sie den NFS-Server mit <command>systemctl start nfsserver</command>. Wenn Sie die Konfiguration des NFS-Servers zu einem späteren Zeitpunkt ändern müssen, ändern Sie die Konfigurationsdatei wie erforderlich und starten Sie den NFS-Daemon mit <command>systemctl restart nfsserver</command> neu.
    </para>
   </step>
  </procedure>

  <procedure xml:id="proc-deployment-instserver-nfs-slpann">
   <para>
    Die Bekanntgabe des NFS-Servers über OpenSLP stellt dessen Adresse allen Clients im Netzwerk zur Verfügung.
   </para>
   <step>
    <para>
     Melden Sie sich als <systemitem class="username">root</systemitem>-Benutzer an.
    </para>
   </step>
   <step>
    <para>
     Erstellen Sie die Konfigurationsdatei <filename>/etc/slp.reg.d/install.suse.nfs.reg</filename> mit folgenden Zeilen:
    </para>
<screen><?dbsuse-fo font-size="7pt"?>

# Register the NFS Installation Server
service:install.suse:nfs://$HOSTNAME/<replaceable>path_to_repository</replaceable>/DVD1,en,65535 
description=NFS Repository</screen>
    <para>
     Ersetzen Sie <replaceable>path_to_repository</replaceable> durch den eigentlichen Pfad der Installationsquelle auf dem Server.
    </para>
   </step>
   <step>
    <para>
     Starten Sie den OpenSLP-Daemon mit <command>systemctl start slpd</command>.
    </para>
   </step>
  </procedure>

  
 </sect1>
 <sect1 xml:id="sec-deployment-instserver-ftp">
  <title>Manuelles Einrichten eines FTP-Repositorys</title>

  <para>
   Das Erstellen eines FTP-Repositorys ist dem Erstellen eines NFS-Repositorys sehr ähnlich. Ein FTP-Repository kann ebenfalls mit OpenSLP im Netzwerk bekannt gegeben werden.
  </para>

  <procedure xml:id="proc-deployment-instserver-ftp">
   <step>
    <para>
     Erstellen Sie wie in <xref linkend="sec-deployment-instserver-nfs"/> beschrieben ein Verzeichnis für die Installationsquellen.
    </para>
   </step>
   <step>
    <para>
     Konfigurieren Sie den FTP-Server für die Verteilung des Inhalts des Installationsverzeichnisses:
    </para>
    <substeps performance="required">
     <step>
      <para>
       Melden Sie sich als <systemitem class="username">root</systemitem> an, und installieren Sie mithilfe der YaST-Softwareverwaltung das Paket <systemitem>vsftpd</systemitem>.
      </para>
     </step>
     <step>
      <para>
       Wechseln Sie in das root-Verzeichnis des FTP-Servers:
      </para>
<screen><prompt role="root">root # </prompt>cd <option>/srv/ftp</option></screen>
     </step>
     <step>
      <para>
       Erstellen Sie im root-Verzeichnis des FTP-Servers ein Unterverzeichnis für die Installationsquellen:
      </para>
<screen><prompt role="root">root # </prompt>mkdir <replaceable>repository</replaceable></screen>
      <para>
       Ersetzen Sie <replaceable>repository</replaceable> durch den Produktnamen.
      </para>
     </step>
     <step>
      <para>
       Hängen Sie den Inhalt des Installations-Repository in der change-root-Umgebung des FTP-Servers ein:
      </para>
<screen><prompt role="root">root # </prompt>mount --bind <replaceable>path_to_repository</replaceable> /srv/ftp/<replaceable>repository</replaceable></screen>
      <para>
       Ersetzen Sie <replaceable>path_to_repository</replaceable> und <replaceable>Repository</replaceable> durch die entsprechenden Werte für Ihre Konfiguration. Wenn diese Einstellungen dauerhaft übernommen werden sollen, fügen Sie sie zu <filename>/etc/fstab</filename> hinzu.
      </para>
     </step>
     <step>
      <para>
       Starten Sie vsftpd mit <command>vsftpd</command>.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Geben Sie das Repository über OpenSLP bekannt, sofern dies von Ihrer Netzwerkkonfiguration unterstützt wird:
    </para>
    <substeps performance="required">
     <step>
      <para>
       Erstellen Sie die Konfigurationsdatei <filename>/etc/slp.reg.d/install.suse.ftp.reg</filename> mit folgenden Zeilen:
      </para>
<screen><?dbsuse-fo font-size="7pt"?>

# Register the FTP Installation Server
service:install.suse:ftp://$HOSTNAME/<replaceable>repository</replaceable>/DVD1,en,65535 
description=FTP Repository</screen>
      <para>
       Ersetzen Sie <replaceable>repository</replaceable> durch den Namen des Repository-Verzeichnisses auf Ihrem Server. Die Zeile <literal>Dienst:</literal> sollte als eine fortlaufende Zeile eingegeben werden.
      </para>
     </step>
     <step>
      <para>
       Starten Sie den OpenSLP-Daemon mit <command>systemctl start slpd</command>.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>

  
 </sect1>
 <sect1 xml:id="sec-deployment-instserver-http">
  <title>Manuelles Einrichten eines HTTP-Repositorys</title>

  <para>
   Das Erstellen eines HTTP-Repositorys ist dem Erstellen eines NFS-Repositorys sehr ähnlich. Ein HTTP-Repository kann ebenfalls mit OpenSLP im Netzwerk bekannt gegeben werden.
  </para>

  <procedure xml:id="proc-deployment-instserver-http">
   <step>
    <para>
     Erstellen Sie wie in <xref linkend="sec-deployment-instserver-nfs"/> beschrieben ein Verzeichnis für die Installationsquellen.
    </para>
   </step>
   <step>
    <para>
     Konfigurieren Sie den HTTP-Server für die Verteilung des Inhalts des Installationsverzeichnisses:
    </para>
    <substeps performance="required">
     <step>
      <para>
       <phrase os="sled">Installieren Sie den Webserver Apache</phrase>.
      </para>
     </step>
     <step>
      <para>
       Wechseln Sie in das root-Verzeichnis des HTTP-Servers (<filename>/srv/www/htdocs</filename>) und erstellen Sie ein Unterverzeichnis für die Installationsquellen:
      </para>
<screen><prompt role="root">root # </prompt>mkdir <replaceable>repository</replaceable></screen>
      <para>
       Ersetzen Sie <replaceable>repository</replaceable> durch den Produktnamen.
      </para>
     </step>
     <step>
      <para>
       Erstellen Sie einen symbolischen Link vom Speicherort der Installationsquellen zum root-Verzeichnis des Webservers (<filename>/srv/www/htdocs</filename>):
      </para>
<screen><prompt role="root">root # </prompt>ln -s <replaceable>/path_to_repository </replaceable>/srv/www/htdocs/<replaceable>repository</replaceable></screen>
     </step>
     <step>
      <para>
       Ändern Sie die Konfigurationsdatei des HTTP-Servers (<filename>/etc/apache2/default-server.conf</filename>) so, dass sie symbolischen Links folgt. Ersetzen Sie die folgende Zeile:
      </para>
<screen>Options None</screen>
      <para>
       mit
      </para>
<screen>Options Indexes FollowSymLinks</screen>
     </step>
     <step>
      <para>
       Laden Sie die HTTP-Server-Konfiguration mit <command>systemctl reload apache2</command> neu.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Geben Sie das Repository über OpenSLP bekannt, sofern dies von Ihrer Netzwerkkonfiguration unterstützt wird:
    </para>
    <substeps performance="required">
     <step>
      <para>
       Erstellen Sie die Konfigurationsdatei <filename>/etc/slp.reg.d/install.suse.http.reg</filename> mit folgenden Zeilen:
      </para>
<screen><?dbsuse-fo font-size="6.5pt"?>

# Register the HTTP Installation Server
service:install.suse:http://$HOSTNAME/<replaceable>repository</replaceable>/DVD1/,en,65535 
description=HTTP Repository</screen>
      <para>
       Ersetzen Sie <replaceable>repository</replaceable> durch den eigentlichen Pfad des Repositorys auf dem Server. Die Zeile <literal>Dienst:</literal> sollte als eine fortlaufende Zeile eingegeben werden.
      </para>
     </step>
     <step>
      <para>
       Starten Sie den OpenSLP-Daemon mit <command>systemctl start slpd</command>.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-deployment-instserver-smb">
  <title>Verwalten eines SMB-Repositorys</title>

  <para>
   Mithilfe von SMB können Sie die Installationsquellen von einem Microsoft Windows-Server importieren und die Linux-Implementierung starten, ohne dass ein Linux-Computer vorhanden sein muss.
  </para>

  <procedure xml:id="proc-deployment-instserver-smb-export">
   <para>
    Gehen Sie wie folgt vor, um eine exportierte Windows-Freigabe mit dem<phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>-Repository einzurichten:
   </para>
   <step>
    <para>
     Melden Sie sich auf dem Windows-Computer an.
    </para>
   </step>
   <step>
    <para>
     Erstellen Sie ein neues Verzeichnis, das die gesamte Baumstruktur der Installation aufnehmen soll, und nennen Sie es beispielsweise <filename>INSTALL</filename>.
    </para>
   </step>
   <step>
    <para>
     Geben Sie diesen Ordner wie in der Windows-Dokumentation beschrieben im Netzwerk frei.
    </para>
   </step>
   <step>
    <para>
     Wechseln Sie in das freigegebene Verzeichnis, und erstellen Sie ein Unterverzeichnis mit dem Namen <filename><replaceable>Produkt</replaceable></filename>. Ersetzen Sie <replaceable>Produkt</replaceable> durch den tatsächlichen Produktnamen.
    </para>
   </step>
   <step>
    <para>
     Wechseln Sie in das Verzeichnis <filename>INSTALL/<replaceable>produkt</replaceable></filename>, und kopieren Sie jede DVD in einen separaten Ordner, z. B. <literal>DVD1</literal> und <literal>DVD2</literal>.
    </para>
   </step>
  </procedure>

  <para>
   Gehen Sie wie folgt vor, um eine SMB-eingehängte Freigabe als Repository zu verwenden:
  </para>

  <procedure xml:id="proc-deployment-instserver-smb-use">
   <step>
    <para>
     Booten Sie das Installationsziel.
    </para>
   </step>
   <step>
    <para>
     Wählen Sie <guimenu>Installation</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Drücken Sie <keycap>F4</keycap>, um eine Auswahl der Repositorys anzuzeigen.
    </para>
   </step>
   <step>
    <para>
     Wählen Sie „SMB“, und geben Sie den Namen oder die IP-Adresse des Windows-Computers, den Freigabenamen (in diesem Beispiel <filename>INSTALL/<replaceable>produkt</replaceable>/DVD1</filename>), den Benutzernamen und das Passwort ein. Beispiel für die Syntax:
    </para>
<screen>smb://workdomain;user:password@server/INSTALL/DVD1</screen>
    <para>
     Wenn Sie <keycap function="enter"/> drücken, wird YaST gestartet und Sie können die Installation ausführen.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-deployment-remoteinst-iso">
  <title>Verwenden von ISO-Images der Installationsmedien auf dem Server</title>

  <para>
   Statt physische Medien manuell in Ihr Serververzeichnis zu kopieren, können Sie auch die ISO-Images der Installationsmedien in Ihrem Installationsserver einhängen und als Repository verwenden. Gehen Sie wie folgt vor, um einen HTTP-, NFS- oder FTP-Server einzurichten, der ISO-Images anstelle von Medienkopien verwendet:
  </para>

  <procedure>
   <step>
    <para>
     Laden Sie die ISO-Images herunter und speichern Sie sie auf dem Rechner, den Sie als Installationsserver verwenden möchten.
    </para>
   </step>
   <step>
    <para>
     Melden Sie sich als <systemitem class="username">root</systemitem>-Benutzer an.
    </para>
   </step>
   <step>
    <para>
     Wählen und erstellen Sie einen geeigneten Speicherort für die Installationsdaten. Siehe dazu <xref linkend="sec-deployment-instserver-nfs"/>, <xref linkend="sec-deployment-instserver-ftp"/> oder <xref linkend="sec-deployment-instserver-http"/>.
    </para>
   </step>
   <step>
    <para>
     Erstellen Sie für jede DVD ein Unterverzeichnis.
    </para>
   </step>
   <step>
    <para>
     Erteilen Sie folgenden Befehl, um jedes ISO-Image an der endgültigen Position einzuhängen und zu entpacken:
    </para>
<screen><prompt role="root">root # </prompt>mount -o loop <replaceable>path_to_iso</replaceable> <replaceable>path_to_repository</replaceable>/<replaceable>product</replaceable>/<replaceable>mediumx</replaceable></screen>
    <para>
     Ersetzen Sie <replaceable>path_to_iso</replaceable> durch den Pfad zu Ihrer lokalen Kopie des ISO-Images, <replaceable>path_to_repository</replaceable> durch das Quellverzeichnis Ihres Servers, <replaceable>product</replaceable> durch den Produktnamen und <replaceable>mediumx</replaceable> durch Typ (CD oder DVD) und Anzahl der verwendeten Medien.
    </para>
   </step>
   <step>
    <para>
     Wiederholen Sie die vorherigen Schritte, um alle erforderlichen ISO-Images für Ihr Produkt einzuhängen.
    </para>
   </step>
   <step>
    <para>
     Starten Sie den Installationsserver wie gewohnt wie unter <xref linkend="sec-deployment-instserver-nfs"/>, <xref linkend="sec-deployment-instserver-ftp"/> oder <xref linkend="sec-deployment-instserver-http"/> beschrieben.
    </para>
   </step>
  </procedure>

  <para>
   Um ISO-Images beim Systemstart automatisch einzuhängen, fügen Sie die entsprechenden Einhänge-Einträge <filename>/etc/fstab</filename> hinzu. Ein Eintrag würde dann gemäß dem vorherigen Beispiel wie folgt aussehen:
  </para>

<screen><replaceable>path_to_iso</replaceable> <replaceable>path_to_repository</replaceable>/<replaceable>product</replaceable><replaceable>medium</replaceable> auto loop</screen>
 </sect1>
</chapter>
