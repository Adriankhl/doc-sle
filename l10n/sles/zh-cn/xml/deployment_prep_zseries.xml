<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_prep_zseries.xml" version="5.0" xml:id="cha-zseries">
 <title>在 IBM Z 上安装</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>是</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    本章介绍在 IBM Z 上安装 <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase> 的准备程序，其中提供了完成在 LPAR 和 z/VM 端安装的准备工作所需的全部信息。
   </para>
  </abstract>
 </info>
 <xi:include href="deployment_prep_zseries_requirements.xml"/>
 <xi:include href="deployment_prep_zseries_info_i.xml"/>
 <xi:include href="deployment_prep_zseries_prep_i.xml"/>
 <sect1 xml:id="sec-appdendix-parm">
  <title>Parmfile — 自动进行系统配置</title>

  <para>
   通过在 <filename>parmfile</filename> 中指定一些关键参数，可以部分自动化安装过程。<filename>parmfile</filename> 包含网络设置和 DASD 配置所需的所有数据。除此之外，它还可用于设置与 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 安装系统及其上运行的 YaST 实例建立连接的方法。用户交互因而限制为由 YaST 对话框控制的实际 YaST 安装。
  </para>

  <para>
   以下参数可以传递到安装例程，该安装例程将这些参数作为安装的默认值。所有 IP 地址、服务器名和数值仅为示例。用安装方案中需要的值替换这些值。
  </para>

  <para>
   parmfile 中的行数限制为 10 行。请在一行上指定多个参数。参数名是不区分大小写的。用空格分隔参数。您可以按任何顺序指定参数。请始终在一行上保持 <literal>PARAMETER=value</literal> 字符串。例如：
  </para>

<screen>Hostname=s390zvm01.suse.de HostIP=10.11.134.65</screen>

  <tip>
   <title>在安装期间使用 IPv6</title>
   <para>
    默认情况下，仅可为您的计算机指定 IPv4 网络地址。要在安装期间启用 IPv6，请在引导提示处输入以下参数之一：<literal>ipv6=1</literal>（接受 IPv4 和 IPv6），<literal>ipv6only=1</literal>（仅接受 IPv6）。
   </para>
  </tip>

  <para>
   需要指定一些引导参数。如果缺少它们，则会暂停自动处理并要求您手动输入值。
  </para>

  <para>
   <xref linkend="cha-boot-parameters"/>中提供了可用引导参数的列表。
  </para>
 </sect1>
 <sect1 xml:id="sec-appdendix-parm-examples">
  <title>示例 parmfile</title>
  <para>
   parmfile 的最大容量为 860 个字符。一般来说，parmfile 最多只应包含 10 行，且每行不超过 80 个字符。读取 parmfile 时，将会串连所有行而不加入空格，因此，每行的最后一个字符 (第 80 个字符) 须为 <keycap function="space"/>。
  </para>
  <para>
   要在控制台上接受潜在的错误消息，请使用
  </para>
<screen>linuxrclog=/dev/console</screen>
  <example xml:id="ex-appdendix-parm-ex1">
   <title>使用 VNC 和 AutoYaST 从 NFS 进行安装的 Parmfile</title>
<screen>ramdisk_size=131072 root=/dev/ram1 ro init=/linuxrc TERM=dumb
instnetdev=osa osainterface=qdio layer2=1 osahwaddr=
pointopoint=192.168.0.1 hostip=192.168.0.2
nameserver=192.168.0.3
install=nfs://192.168.0.4/SLES/SLES-12-Server/s390x/DVD1
autoyast=http://192.168.0.5/autoinst.xml
linuxrclog=/dev/console vnc=1 VNCPassword=testing</screen>
  </example>
  <example xml:id="ex-appdendix-parm-ex2">
   <title>parmfile 安装（对于 NFS、SSH 和 HSI），AutoYaST 安装（对于 NFS）</title>
<screen>ramdisk_size=131072 root=/dev/ram1 ro init=/linuxrc TERM=dumb
AutoYast=nfs://192.168.1.1/autoinst/s390.xml
Hostname=zsystems.example.com HostIP=192.168.1.2
Gateway=192.168.1.3 Nameserver=192.168.1.4
InstNetDev=hsi layer2=0
Netmask=255.255.255.128 Broadcast=192.168.1.255
readchannel=0.0.702c writechannel=0.0.702d datachannel=0.0.702e
install=nfs://192.168.1.5/SLES-12-Server/s390x/DVD1/
ssh=1 ssh.password=testing linuxrclog=/dev/console</screen>
  </example>
  <example xml:id="ex-appdendix-parm-ex3">
   <title>用于在 VLAN 中安装的 Parmfile</title>
<screen>ro ramdisk_size=50000 MANUAL=0 PORTNO=1 ReadChannel=0.0.b140
WriteChannel=0.0.b141 DataChannel=0.0.b142
cio_ignore=all,!condev,!0.0.b140-0.0.b142,!0.0.e92c,!0.0.5000,!0.0.5040
HostIP= Gateway= Hostname=zsystems.example.com nameserver=192.168.0.1
Install=ftp://user:password@10.0.0.1/s390x/SLES15.0/INST/ usevnc=1
vncpassword=12345 InstNetDev=osa Layer2=1 OSAInterface=qdio ssl_certs=0
osahwaddr= domain=example.com self_update=0
ifcfg=eth0.201=192.168.0.2/16,192.168.0.1</screen>
  </example>
 </sect1>
 <sect1 xml:id="sec-appdendix-vt220">
  <title>使用 vt220 终端仿真器</title>

  <para>
   最新的 MicroCode 级别除了标准行模式终端外，还允许使用集成的 vt220 终端仿真器（ASCII 终端）。vt220 终端连接到 <filename>/dev/ttysclp0</filename>。行模式终端连接到 <filename>/dev/ttysclp_line0</filename>。对于 LPAR 安装，已按默认启动 vt220 终端仿真器。
  </para>

  <para>
   要在 HMC 上启动 ASCII 控制台，请登录 HMC，然后选择<menuchoice> <guimenu>系统管理</guimenu>
   <guimenu>系统</guimenu>
   <guimenu><phrase><replaceable>映像 ID</replaceable></phrase>
   </guimenu></menuchoice>。选择 LPAR 对应的单选按钮，然后选择<menuchoice> <guimenu>恢复</guimenu> <guimenu>集成式 ASCII 控制台</guimenu> </menuchoice>。
  </para>

  <para>
   要将引导时的内核消息从系统控制台重定向到 vt220 终端，请将以下条目添加到 <filename>/etc/zipl.conf</filename> 中的 <literal>parameters</literal> 行：
  </para>

<screen>console=ttysclp0 console=ttysclp_line0</screen>

  <para>
   产生的 <literal>parameters</literal> 行看似如以下示例：
  </para>

<screen>parameters = "root=/dev/dasda2 TERM=dumb console=ttysclp0 console=ttysclp_line0"</screen>

  <para>
   在 <filename>/etc/zipl.conf</filename> 中保存更改，运行 <command>zipl</command> 并重新引导系统。
  </para>
 </sect1>
 <sect1 xml:id="sec-appdendix-further-information">
  <title>有关 IBM Z 的更深入信息</title>

  <para>
   IBM 红皮书 (<link xlink:href="https://www.redbooks.ibm.com/Redbooks.nsf/domains/zsystems"/>) 或 IBM developerWorks (<link xlink:href="https://www.ibm.com/developerworks/linux/linux390/"/>) 上提供了有关 IBM Z 的更多深入技术文档。<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 特定的文档可从 <link xlink:href="https://www.ibm.com/developerworks/linux/linux390/documentation_suse.html"/> 上获取。
  </para>

  <sect2 xml:id="sec-intro-further-information-general">
   <title>有关 Linux on IBM Z 的一般文档</title>
   <para>
    以下文档提供了有关 Linux on IBM Z 的一般信息：
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Linux on IBM eServer zSeries and S/390: ISP and ASP Solutions (SG24-6299)
     </para>
    </listitem>
   </itemizedlist>
   <para>
    这些文档可能不能反映 Linux 的最新状态，但它们列出的 Linux 部署的准则仍然正确。
   </para>
  </sect2>

  <sect2 xml:id="sec-intro-further-information-technical">
   <title>有关 Linux on IBM Z 的技术问题</title>
   <para>
    请参见以下文档，以获得有关 Linux 内核和应用程序主题的详细技术信息。请参见因特网，以了解这些文档有关最新代码发布的最新版本 (<link xlink:href="http://www.ibm.com/developerworks/linux/linux390/index.html"/>)。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Linux on System z Device Drivers, Features, and Commands
     </para>
    </listitem>
    <listitem>
     <para>
      zSeries ELF Application Binary Interface Supplement
     </para>
    </listitem>
    <listitem>
     <para>
      Linux on System z Device Drivers, Using the Dump Tools
     </para>
    </listitem>
    <listitem>
     <para>
      IBM zEnterprise 196 技术指南
     </para>
    </listitem>
    <listitem>
     <para>
      IBM zEnterprise EC12 技术指南
     </para>
    </listitem>
    <listitem>
     <para>
      IBM z13 技术指南
     </para>
    </listitem>
    <listitem>
     <para>
      IBM z14 技术指南
     </para>
    </listitem>
   </itemizedlist>
   <para>
    <link xlink:href="http://www.redbooks.ibm.com"/> 上也提供了一本有关 Linux 应用程序开发的红皮书：
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Linux on IBM eServer zSeries and S/390: Application Development (SG24-6807)
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="sec-info-further-information-advanced">
   <title>Linux on IBM Z 的高级配置</title>
   <para>
    请参见以下红皮书、红皮文件和链接，了解一些更复杂的 IBM Z 方案：
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Linux on IBM eServer zSeries and S/390: Large Scale Deployment (SG24-6824)
     </para>
    </listitem>
    <listitem>
     <para>
      Linux on IBM eServer zSeries and S/390: Performance Measuring and Tuning (SG24-6926)
     </para>
    </listitem>
    <listitem>
     <para>
      Linux with zSeries and ESS: Essentials (SG24-7025)
     </para>
    </listitem>
    <listitem>
     <para>
      IBM TotalStorage Enterprise Storage Server Implementing ESS Copy Services with IBM eServer zSeries (SG24-5680)
     </para>
    </listitem>
    <listitem>
     <para>
      Linux on IBM zSeries and S/390: High Availability for z/VM and Linux (REDP-0220)
     </para>
    </listitem>
    <listitem>
     <para>
      Saved Segments Planning and Administration
     </para>
     <para>
      <link xlink:href="http://publibz.boulder.ibm.com/epubs/pdf/hcsg4a00.pdf"/>
     </para>
    </listitem>
    <listitem>
     <para>
      Linux on System z documentation for "Development stream"
     </para>
     <para>
      <link xlink:href="http://www.ibm.com/developerworks/linux/linux390/development_documentation.html"/>
     </para>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>
</chapter>
