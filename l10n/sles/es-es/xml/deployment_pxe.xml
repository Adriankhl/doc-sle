<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_pxe.xml" version="5.0" role="General" xml:id="cha-deployment-prep-pxe">
 <title>Preparación del entorno de arranque de red</title>
 <info>
  <abstract>
   <para>
    En este capítulo se describe cómo configurar servidores DHCP y TFTP que proporcionen la infraestructura necesaria para el arranque con PXE.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>sí</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase> se puede instalar a través de un entorno de ejecución previa al arranque (PXE). El hardware cliente debe admitir el arranque mediante PXE. La red debe disponer de un servidor DHCP y un servidor TFTP que proporcione los datos necesarios a los clientes. En este capítulo encontrará información que le ayudará a configurar los servidores necesarios.
 </para>
 <para>
  PXE solo arranca un núcleo e initrd. Se puede utilizar para arrancar un entorno de instalación o sistemas Live. Para configurar los orígenes de instalación, consulte el <xref linkend="cha-deployment-instserver"/>.
 </para>
 <para>
  En esta sección se describen las tareas de configuración necesarias en entornos de arranque complejos. Contiene ejemplos de configuración listos para usar para DHCP, arranque en PXE, TFTP y Wake on LAN.
 </para>
 <para>
  Los ejemplos presuponen que los servidores DHCP, TFTP y NFS se encuentran en el mismo equipo con la dirección IP <literal>192.168.1.1</literal>. Todos los servicios pueden residir en distintos equipos. Asegúrese de cambiar las direcciones IP según sea necesario.
 </para>
 <sect1 xml:id="sec-deployment-dhcp-server">
  <title>Configuración de un servidor DHCP</title>
  <para>
   Además de ofrecer asignación de direcciones automática a los clientes de la red, el servidor DHCP anuncia la dirección IP del servidor TFTP y las vías a los archivos de núcleo e initrd. El archivo que se debe cargar depende de la arquitectura del equipo de destino y de si se utiliza un arranque BIOS tradicional o UEFI. Los clientes transmiten su tipo de arquitectura en la petición DHCP. En función de esta información, el servidor DHCP puede decidir qué archivos debe descargar el cliente para el arranque.
  </para>
  <procedure xml:id="pro-deployment-dhcp-server">
   <step>
    <para>
     Inicie sesión como usuario <systemitem class="username">root</systemitem> en la máquina que aloje el servidor DHCP.
    </para>
   </step>
   <step>
    <para>
     Para habilitar el servidor DHCP, ejecute el comando <command>systemctl enable dhcpd</command>.
    </para>
   </step>
   <step>
    <para>
     Añada las siguientes líneas a una configuración de subred del archivo de configuración del servidor DHCP que se encuentra en <filename>/etc/dhcp.conf</filename>:
    </para>
<screen># The following lines are optional
option domain-name "my.lab";
option domain-name-servers 192.168.1.1;
option routers 192.168.1.1;
option ntp-servers 192.168.1.1;
ddns-update-style none;
default-lease-time 3600;

# The following lines are required
option arch code 93 = unsigned integer 16; # RFC4578
subnet 192.168.1.0 netmask 255.255.255.0 {
 next-server 192.168.1.1;
 range 192.168.1.100 192.168.1.199;
 default-lease-time 3600;
 max-lease-time 3600;
 if option arch = 00:07 or option arch = 00:09 {
   filename "/EFI/x86/grub.efi";
 }
 else if option arch = 00:0b {
   filename "/EFI/aarch64/bootaa64.efi";
 }
 else  {
   filename "/BIOS/x86/pxelinux.0";
 }
}</screen>
    <para>
     En este ejemplo de configuración se utiliza la subred <literal>192.168.1.0/24</literal> con los servicios DHCP, DNS y gateway en el servidor con la dirección IP <literal>192.168.1.1</literal>. Recuerde modificar todas las direcciones IP utilizadas según la estructura de la red. Para obtener más información acerca las opciones disponibles en <filename>dhcpd.conf</filename>, consulte la página de Man de <systemitem>dhcpd.conf</systemitem>.
    </para>
   </step>
   <step>
    <para>
     Para reiniciar el servidor DHCP, ejecute el comando <command>systemctl restart dhcpd</command>.
    </para>
   </step>
  </procedure>
  <para>
   Si tiene previsto utilizar SSH para controlar remotamente una instalación PXE y Wake on LAN, especifique la dirección IP que DHCP debe suministrar al destino de la instalación. Para ello, modifique la configuración DHCP antes mencionada de acuerdo con el siguiente ejemplo:
  </para>
<screen>group {
 host test {
   hardware ethernet <replaceable>MAC_ADDRESS</replaceable>;
   fixed-address <replaceable>IP_ADDRESS</replaceable>;
   }
}
</screen>
  <para>
   La declaración del host incluye el nombre del host del destino de la instalación. Para vincular el nombre de host y la dirección IP con un host determinado, es necesario conocer y especificar la dirección de hardware del sistema (MAC). Sustituya todas las variables utilizadas en este ejemplo por los valores reales correspondientes a su entorno.
  </para>
  <para>
   Una vez reiniciado el servidor DHCP, ofrecerá una dirección IP estática al host especificado, lo que permitirá conectarse al sistema mediante SSH.
  </para>
 </sect1>

 <sect1 xml:id="sec-deployment-tftp-server">
  <title>Configuración de un servidor TFTP</title>
  <para>
   Los procedimientos siguientes describen cómo preparar el servidor para equipos de destino con UEFI y BIOS en arquitecturas x86 de 32 y 64 bits. La estructura preparada también proporciona una ubicación para los sistemas AArch64.
  </para>
  <sect2 xml:id="sec-deployment-tftp-server-install">
   <title>Instalación del servidor TFTP</title>
   <para>
    Para instalar un servidor TFTP, utilice el siguiente procedimiento:
   </para>

   <procedure>
    <step>
     <para>
      Instale el paquete <systemitem>tftp</systemitem>.
     </para>
     <screen><prompt>tux &gt; </prompt><command>sudo</command> <command>zypper in tftp</command></screen>
    </step>
    <step>
     <para>
      Revise la configuración de <systemitem class="daemon">tftpd</systemitem> en <filename>/etc/sysconfig/tftp</filename> y añada o modifique las opciones según sea necesario. Consulte <command>man 8 tftpd</command> para obtener más información. El daemon TFTP funciona sin necesidad de modificar la configuración. El directorio raíz por defecto para los archivos es <filename>/srv/tftpboot</filename>.
     </para>
    </step>
    <step>
     <para>
      Asegúrese de que <systemitem class="daemon">tftpd</systemitem> se inicia durante el arranque y reinícielo para leer la nueva configuración.
     </para>
     <screen><prompt>tux &gt; </prompt><command>sudo</command> <command>systemctl enable tftp.socket</command>
<prompt>tux &gt; </prompt><command>sudo</command> <command>systemctl restart tftp.socket</command></screen>
    </step>
   </procedure>
  </sect2>
  <sect2 xml:id="sec-deployment-tftp-server-grub-package">
   <title>Instalación de archivos PXE desde un paquete</title>
   <para>
    <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> proporciona los archivos necesarios para arrancar mediante PXE en equipos con BIOS o UEFI en un paquete RPM. Instale los archivos en el equipo que ejecuta el servidor TFTP:
   </para>
   <screen><prompt>tux &gt; </prompt><command>sudo</command> <command>zypper in tftpboot-installation-SLES-<replaceable>OS_VERSION</replaceable>-<replaceable>ARCHITECTURE</replaceable></command></screen>
   <para>
    Sustituya <replaceable>OS_VERSION</replaceable> por la versión de su instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> (por ejemplo, <literal>15</literal>) y <replaceable>ARCHITECTURE</replaceable> por la arquitectura de su sistema (por ejemplo, <literal>x86_64</literal>). Puede utilizar <command>zypper se tftpboot</command> para buscar todas las arquitecturas y las versiones disponibles.
   </para>
   <para>
    Los archivos se instalarán en <filename>/srv/tftpboot/SLES-<replaceable>OS_VERSION</replaceable>-<replaceable>ARCHITECTURE</replaceable></filename>. También puede copiar los archivos para otras versiones y las arquitecturas de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en el directorio <filename>/srv/tftpboot</filename>.
   </para>
  </sect2>
  <sect2 xml:id="sec-deployment-tftp-server-pxelinux">
   <title>Configuración PXELINUX</title>
   <para>
    Abra el archivo <filename>/srv/tftpboot/SLES-<replaceable>OS_VERSION</replaceable>-<replaceable>ARCHITECTURE</replaceable>/net/pxelinux.cfg/default</filename> en un editor. Sustituya la vía del parámetro <literal>install</literal> según la configuración, tal como se describe en el <xref linkend="cha-deployment-instserver"/>. Sustituya <replaceable>TFTP_SERVER</replaceable> con la dirección IP del servidor TFTP. Encontrará una descripción general de las opciones de configuración de PXELINUX en la <xref linkend="sec-deployment-prep-boot-pxeopts"/>.
   </para>
<screen>default linux

# install
label linux
  ipappend 2
  kernel boot/<replaceable>ARCHITECTURE</replaceable>/loader/linux
  append initrd=boot/x86_64/<replaceable>ARCHITECTURE</replaceable>/initrd instsys=tftp://<replaceable>TFTP_SERVER</replaceable>/SLES-<replaceable>OS_VERSION</replaceable>-<replaceable>ARCHITECTURE</replaceable>/boot/<replaceable>ARCHITECTURE</replaceable>/root install=<replaceable>PROTOCOL</replaceable>://<replaceable>SERVER_IP</replaceable>:/<replaceable>PATH</replaceable>

display  message
implicit 1
prompt  1
timeout  50</screen>
   <para>
    Para obtener información acerca de los parámetros de arranque que se utilizan en la línea <literal>append</literal>, consulte la <xref linkend="sec-boot-parameters-list"/>.
   </para>
   <para>
    Si es necesario, edite <filename>/srv/tftpboot/SLES-<replaceable>OS_VERSION</replaceable>-<replaceable>ARCHITECTURE</replaceable>/net/pxelinux.cfg/message</filename> para que se muestre un mensaje en el menú de arranque.
   </para>
  </sect2>
  <sect2 xml:id="sec-deployment-tftp-server-efilinux-x86">
   <title>Preparación del arranque PXE para EFI con GRUB2</title>
   <para>
    No es necesario modificar los archivos de configuración de GRUB2. No obstante, en los valores por defecto no se proporciona ningún origen de red para el sistema de instalación. Si desea instalar totalmente <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> a través de la red, añada el parámetro <option>install</option> a las líneas <option>linuxefi</option> en el archivo <filename>/srv/tftpboot/SLES-<replaceable>OS_VERSION</replaceable>-<replaceable>ARCHITECTURE</replaceable>/EFI/BOOT/grub.cfg</filename>. Defina el parámetro <literal>install</literal> según la configuración, tal como se describe en el <xref linkend="cha-deployment-instserver"/>. Para obtener información acerca de otros parámetros de arranque que se utilizan en las líneas <literal>efilinux</literal>, consulte la <xref linkend="sec-boot-parameters-list"/>.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-deployment-prep-boot-pxeopts">
  <title>Opciones de configuración de PXELINUX</title>

  <para>
   A continuación aparecen algunas de las opciones disponibles para el archivo de configuración de PXELINUX.
  </para>

  <variablelist>
   <varlistentry>
    <term><option>APPEND <replaceable>OPCIONES</replaceable></option>
    </term>
    <listitem>
     <para>
      Añada una o más opciones a la línea de comandos del núcleo. Éstas se añaden para arranques automáticos y manuales. Las opciones se añaden al principio de la línea de comandos del núcleo, y normalmente admiten que las opciones del núcleo introducidas explícitamente las sobrescriban.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>APPEND -</option>
    </term>
    <listitem>
     <para>
      No añade nada. Se puede utilizar <option>APPEND</option> con un solo guion como argumento en una sección <option>LABEL</option> para anular un valor de <option>APPEND</option> global.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>DEFAULT <replaceable>OPCIONES_NÚCLEO</replaceable>...</option>
    </term>
    <listitem>
     <para>
      Establece la línea de comandos del núcleo por defecto. Si PXELINUX arranca de manera automática, actúa como si las entradas posteriores a DEFAULT se hubieran escrito en el indicador de inicio, excepto la opción auto que se añade de manera automática, lo que indica un arranque automático.
     </para>
     <para>
      Si no hay ningún archivo de configuración o ninguna entrada DEFAULT definida en el archivo de configuración, el valor por defecto es el nombre del núcleo <quote>linux</quote>, sin opciones.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term><option>IFAPPEND <replaceable>FLAG</replaceable></option>
    </term>
    <listitem>
     <para>
      Añade una opción específica a la línea de comando del núcleo dependiendo del valor de <replaceable>FLAG</replaceable>. La opción <option>IFAPPEND</option> solo está disponible en PXELINUX. <replaceable>FLAG</replaceable> espera un valor, descrito en <xref linkend="tab-deployment-boot-pxeopts-ifappend"/>:
     </para>
     <table xml:id="tab-deployment-boot-pxeopts-ifappend">
      <title>Opciones de líneas de comandos del núcleo generadas y añadidas desde <option>IFAPPEND</option></title>
      <tgroup cols="2">
       <colspec colwidth="1*"/>
       <colspec colwidth="4*"/>
       <thead>
        <row>
         <entry valign="middle">
          <para>
           Argumento
          </para>
         </entry>
         <entry>
          <para>
           Línea de comando del núcleo generada/Descripción
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           <option>1</option>
          </para>
         </entry>
         <entry>
<screen>ip=<replaceable>CLIENT_IP</replaceable>:<replaceable>BOOT_SERVER_IP</replaceable>:<replaceable>GW_IP</replaceable>:<replaceable>NETMASK</replaceable></screen>
          <para>
           Los espacios reservados se reemplazan según la entrada del servidor de arranque DHCP/BOOTP o PXE.
          </para>
          <para>
           Tenga en cuenta que esta opción no sustituye a la ejecución de un cliente DHCP en el sistema arrancado. Sin renovaciones regulares, la asignación adquirida por el BIOS PXE caducará, con lo que la dirección IP vuelve a estar disponible para que la reutilice el servidor DHCP.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <option>2</option>
          </para>
         </entry>
         <entry>
<screen>BOOTIF=<replaceable>MAC_ADDRESS_OF_BOOT_INTERFACE</replaceable></screen>
          <para>
           Esta opción resulta útil para evitar interrupciones cuando el servidor de instalación sondea una interfaz LAN tras otra hasta que recibe respuesta de un servidor DHCP. Esta opción permite que un programa initrd determine desde qué interfaz se ha arrancado el sistema. linuxrc lee esta opción y utiliza la interfaz de red.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <option>4</option>
          </para>
         </entry>
         <entry>
<screen>SYSUUID=<replaceable>SYSTEM_UUID</replaceable></screen>
          <para>
           Añade UUID en formato hexadecimal en minúscula, ver <filename>/usr/share/doc/packages/syslinux/pxelinux.txt</filename>
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>LABEL <replaceable>ETIQUETA</replaceable> KERNEL <replaceable>IMAGEN</replaceable> APPEND <replaceable>OPCIONES</replaceable>...</option>
    </term>
    <listitem>
     <para>
      Indica que si <replaceable>ETIQUETA</replaceable> se introduce como el núcleo que se debe arrancar, PXELINUX debe arrancar en su lugar <replaceable>IMAGEN</replaceable> y se deben usar las opciones de <option>APPEND</option> especificadas. Reemplazarán a las indicadas en la sección global del archivo, antes del primer comando <option>LABEL</option>. El valor por defecto de <replaceable>IMAGEN</replaceable> es el mismo que <replaceable>LABEL</replaceable> y, si no se introduce ningún <option>APPEND</option>, el valor por defecto consiste en utilizar la entrada global (si hubiera alguna). Se permiten hasta 128 entradas <option>LABEL</option>.
     </para>

     <para>
      PXELINUX utiliza la siguiente sintaxis:
     </para>
<screen>label <replaceable>MYLABEL</replaceable>
  kernel <replaceable>MYKERNEL</replaceable>
  append <replaceable>MYOPTIONS</replaceable></screen>
     <para>
      Las etiquetas se truncan como si fueran nombres de archivo, y deben ser únicas después del truncamiento. Por ejemplo, dos etiquetas como <quote>v2.6.30</quote> y <quote>v2.6.31</quote> no podrán distinguirse en PXELINUX, ya que ambas se truncan con el mismo nombre de archivo de DOS.
     </para>
     <para>
      No es necesario que el núcleo sea de Linux. También puede tratarse de un sector de arranque o de un archivo COMBOOT.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>LOCALBOOT <replaceable>TIPO</replaceable></option>
    </term>
    <listitem>
     <para>
      En PXELINUX, especificar <option>LOCALBOOT 0</option> en lugar de una opción de <option>KERNEL</option> significa la invocación de esa etiqueta en particular y provoca un arranque del disco local en lugar de un arranque del núcleo.
     </para>
     <informaltable frame="topbot" rowsep="0">
      <tgroup cols="2">

       <thead>
        <row>
         <entry>
          <para>
           Argumento
          </para>
         </entry>
         <entry>
          <para>
           Descripción
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           <literal>0</literal>
          </para>
         </entry>
         <entry>
          <para>
           Realiza un arranque normal
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>4</literal>
          </para>
         </entry>
         <entry>
          <para>
           Realiza un arranque local con el controlador Universal Network Driver Interface (UNDI) aún residente en memoria
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>5</literal>
          </para>
         </entry>
         <entry>
          <para>
           Realiza un arranque local con el stack de PXE completo, incluido el controlador UNDI, aún residente en memoria
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
     </informaltable>
     <para>
      Los demás valores no están definidos. Si desconoce los stacks UNDI o PXE, especifique <literal>0</literal>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>TIMEOUT <replaceable>TIEMPO LÍMITE</replaceable></option>
    </term>
    <listitem>
     <para>
      Indica cuánto tiempo deberá esperar en el indicador de inicio antes de arrancar automáticamente, en décimas de segundo. El tiempo límite queda cancelado cuando el usuario pulsa alguna tecla, en cuyo caso se asume que será este quien complete el comando iniciado. Un tiempo límite de cero inhabilita la opción de tiempo límite (es el ajuste por defecto). El máximo valor posible para el valor del tiempo límite es de 35996 (algo menos de una hora).
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>PROMPT<replaceable> valor_de_indicador</replaceable></option>
    </term>
    <listitem>
     <para>
      Si <option>flag_val</option> es 0, muestra el indicador de inicio solo si se pulsan las teclas <keycap function="shift"/> o <keycap function="alt"/>, o si están activados, <keycap>Bloq Mayús</keycap> o <keycap>Bloq Despl</keycap> (es la opción por defecto). Si <option>valor_de_indicador</option> es 1, siempre se muestra el indicador de inicio.
     </para>
<screen>F2  <replaceable>FILENAME</replaceable>
F1  <replaceable>FILENAME</replaceable>
..etc...
F9  <replaceable>FILENAME</replaceable>
F10 <replaceable>FILENAME</replaceable></screen>
     <para>
      Muestra en la pantalla el archivo indicado cuando se pulsa una tecla de función en el indicador de inicio. También se puede utilizar para implementar una ayuda en línea para antes del arranque (normalmente para las opciones de la línea de comandos del núcleo). Por compatibilidad con versiones anteriores, <keycap>F10</keycap> también puede introducirse como <literal>F0</literal>. Tenga en cuenta que no es posible asociar nombres de archivos a <keycap>F11</keycap> ni <keycap>F12</keycap>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 xml:id="sec-deployment-prep-boot-pxeprep">
  <title>Preparación del sistema de destino para arranque en PXE</title>

  <para>
   Prepare el BIOS del sistema para arranque en PXE incluyendo la opción de PXE en el orden de arranque del BIOS.
  </para>

  <warning>
   <title>orden de arranque del BIOS</title>
   <para>
    No coloque la opción de PXE por encima del parámetro de arranque desde disco duro en el BIOS. De lo contrario, el sistema intentará reinstalarse cada vez que lo arranque.
   </para>
  </warning>
 </sect1>
 <sect1 xml:id="sec-deployment-prep-boot-wolprep">
  <title>Preparación del sistema de destino para Wake on LAN</title>

  <para>
   Wake on LAN (WOL) necesita que se habilite la opción correspondiente del BIOS antes de la instalación. Además, es necesario tomar nota de la dirección MAC del sistema de destino. Este dato es necesario para iniciar Wake on LAN.
  </para>
 </sect1>
 <sect1 xml:id="sec-deployment-prep-boot-wol">
  <title>Wake on LAN</title>

  <para>
   Wake on LAN permite encender una máquina mediante el envío de un paquete de red especial que contiene la dirección MAC de la máquina. Dado que los identificadores MAC deben ser únicos para cada máquina, no hay que preocuparse si se conecta accidentalmente una máquina equivocada.
  </para>

  <important>
   <title>Wake on LAN en distintos segmentos de red</title>
   <para>
    Si la máquina de control no se encuentra en el mismo segmento de red que el destino del comando WOL, dispondrá de 2 opciones. Configure las peticiones WOL para que se envíen como multidifusión o bien controle remotamente una máquina de dicho segmento de red para que actúe como remitente de estas peticiones.
   </para>
  </important>

  <para>
   Los usuarios de SUSE Linux Enterprise Server pueden usar un módulo YaST llamado WOL para configurar Wake on LAN fácilmente. Los usuarios de otras versiones de sistemas operativos basados en SUSE Linux pueden usar una herramienta de línea de comandos.
  </para>
 </sect1>
 <sect1 xml:id="sec-deployment-prep-boot-wolyast">
  <title>Wake on LAN con YaST</title>
  <para>
   Utilice este procedimiento para configurar Wake on LAN con YaST.
  </para>
  <procedure xml:id="pro-deployment-prep-boot-wolyast">
   <step>
    <para>
     Entre a la sesión como usuario <systemitem class="username">root</systemitem>.
    </para>
   </step>
   <step>
    <para>
     Inicie <menuchoice><guimenu>YaST</guimenu><guimenu>Servicios de red</guimenu><guimenu>WOL</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Haga clic en <guimenu>Añadir</guimenu> y escriba el nombre de host y la dirección MAC del sistema de destino.
    </para>
   </step>
   <step>
    <para>
     Para encender este equipo, seleccione la entrada adecuada y haga clic en <guimenu>Wake up.</guimenu>
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-deployment-prep-boot-mksusecd">
  <title>Arranque desde una unidad de CD o USB en lugar de PXE</title>
  <para>
   También es posible utilizar una unidad de CD, DVD o USB con una imagen pequeña del sistema en lugar de arrancar mediante PXE. Tan pronto como se carguen el núcleo e initrd, los archivos necesarios se recuperarán a través de NFS. Se puede crear una imagen que se puede arrancar con <command>mksusecd</command>. Esto puede resultar útil si el equipo de destino no admite el arranque PXE.
  </para>
  <para>
   Para instalarlo, use <command>sudo zypper in mksusecd</command>. Utilice el comando siguiente para crear una imagen ISO que se pueda arrancar:
  </para>
  <screen><prompt>tux &gt; </prompt><command>mksusecd</command> --create image.iso \
--net=nfs://192.168.1.1:/srv/install/<replaceable>ARCH</replaceable>/<replaceable>OS_VERSION</replaceable>/<replaceable>SP_VERSION</replaceable>/cd1  \
/srv/tftpboot/EFI/<replaceable>ARCH</replaceable>/boot</screen>
  <para>
   Sustituya <replaceable>ARCH</replaceable> por el directorio correspondiente a la arquitectura del sistema de destino. Sustituya también <replaceable>OS_version</replaceable> y <replaceable>SP_version</replaceable> con las vías de la <xref linkend="sec-deployment-tftp-server"/>.
  </para>
  <para>
   En lugar de utilizar un servidor NFS para la opción <option>--net</option>, también es posible usar un repositorio HTTP; por ejemplo, el repositorio de openSUSE:
  </para>
  <screen><prompt>tux &gt; </prompt><command>mksusecd</command> --create image.iso \
--net=http://download.opensuse.org/tumbleweed/repo/oss/suse \
/srv/tftpboot/EFI/<replaceable>ARCH</replaceable>/boot</screen>
  <para>
   La imagen <filename>image.iso</filename> se puede escribir en un CD o DVD o, mediante <command>dd</command>, en un dispositivo de memoria USB:
  </para>
  <screen><prompt role="root">root # </prompt><command>dd</command> if=image.iso of=/dev/<replaceable>USB_DEVICE</replaceable></screen>
  <para>
   Sustituya <replaceable>USB_DEVICE</replaceable> por el nombre del dispositivo de memoria USB. Compruebe atentamente el nombre del dispositivo para asegurarse de que no se destruye accidentalmente datos en otra unidad.
  </para>
 </sect1>
</chapter>
