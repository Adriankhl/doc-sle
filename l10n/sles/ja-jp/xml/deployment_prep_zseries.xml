<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_prep_zseries.xml" version="5.0" xml:id="cha-zseries">
 <title>IBM Zでのインストール</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    この章では、IBM Z上で<phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>のインストールを準備する際の手順について説明します。LPARおよびz/VMの側でインストールを準備する際に必要な情報をすべて示します。
   </para>
  </abstract>
 </info>
 <xi:include href="deployment_prep_zseries_requirements.xml"/>
 <xi:include href="deployment_prep_zseries_info_i.xml"/>
 <xi:include href="deployment_prep_zseries_prep_i.xml"/>
 <sect1 xml:id="sec-appdendix-parm">
  <title>parmfile: システム設定の自動化</title>

  <para>
   インストールプロセスは、<filename>parmfile</filename>で不可欠なパラメータを指定することで、部分的に自動化することができます。<filename>parmfile</filename>には、ネットワーク設定とDASD設定に必要なすべてのデータが含まれています。また、parmfileを使用して、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のインストールシステムおよびそのシステムで実行しているYaSTインスタンスに接続する方法を設定することもできます。したがって、ユーザ操作は、YaSTダイアログによって制御される実際のYaSTインストールで必要になるだけです。
  </para>

  <para>
   次のパラメータをインストールルーチンに渡して、インストール用のデフォルト値として適用させることができます。ここで使用しているすべてのIPアドレス、サーバ名、および数値は、あくまでも例にすぎません。これらの値は、実際のインストールシナリオで必要になる値に置き換えてください。
  </para>

  <para>
   parmfile内の行数は10に制限されます。各行に複数のパラメータを指定します。パラメータ名は大文字小文字を区別しません。各パラメータはスペースで区切ります。パラメータは任意の順序で指定できます。<literal>PARAMETER=value</literal>の文字列は、必ず1行に収めてください。例を次に示します。
  </para>

<screen>Hostname=s390zvm01.suse.de HostIP=10.11.134.65</screen>

  <tip>
   <title>インストール時のIPv6の使用</title>
   <para>
    デフォルトでは、マシンにIPv4ネットワークアドレスのみを割り当てることができます。インストール時にIPv6を有効にするには、ブートプロンプトで<literal>ipv6=1</literal>(IPv4とIPv6を受け入れ)パラメータまたは<literal>ipv6only=1</literal>(IPv6のみを受け入れ)パラメータのいずれかを入力します。
   </para>
  </tip>

  <para>
   いくつかのブートパラメータは必須です。必須パラメータがない場合、自動プロセスは停止し、値の手動入力を要求してきます。
  </para>

  <para>
   使用可能なブートパラメータのリストは、<xref linkend="cha-boot-parameters"/>に記載されています。
  </para>
 </sect1>
 <sect1 xml:id="sec-appdendix-parm-examples">
  <title>parmfileの例</title>
  <para>
   parmfileに記述できる文字数は最大で860文字です。目安として、79文字以下の行を最大10行とします。parmfileの読み取りでは、すべての行が間に空白を挟まずに連結されます。したがって、各行の末尾(79番目の文字)は<keycap function="space"/>とする必要があります。
  </para>
  <para>
   コンソールでエラーメッセージを受け取るには、次のコードを使用します。
  </para>
<screen>linuxrclog=/dev/console</screen>
  <example xml:id="ex-appdendix-parm-ex1">
   <title>VNCおよびAutoYaSTを使用してNFSからインストールする場合のparmfile</title>
<screen>ramdisk_size=131072 root=/dev/ram1 ro init=/linuxrc TERM=dumb
instnetdev=osa osainterface=qdio layer2=1 osahwaddr=
pointopoint=192.168.0.1
hostip=192.168.0.2
nameserver=192.168.0.3
install=nfs://192.168.0.4/SLES/SLES-12-Server/s390x/DVD1
autoyast=http://192.168.0.5/autoinst.xml
linuxrclog=/dev/console vnc=1
VNCPassword=testing</screen>
  </example>
  <example xml:id="ex-appdendix-parm-ex2">
   <title>NFS、SSH、HSI、およびNFSによるAutoYaSTを使用したインストール用のparmfile</title>
<screen>ramdisk_size=131072 root=/dev/ram1 ro init=/linuxrc TERM=dumb
AutoYast=nfs://192.168.1.1/autoinst/s390.xml
Hostname=zsystems.example.com HostIP=192.168.1.2
Gateway=192.168.1.3 Nameserver=192.168.1.4
InstNetDev=hsi layer2=0
Netmask=255.255.255.128 Broadcast=192.168.1.255
readchannel=0.0.702c writechannel=0.0.702d datachannel=0.0.702e
install=nfs://192.168.1.5/SLES-12-Server/s390x/DVD1/
ssh=1 ssh.password=testing linuxrclog=/dev/console</screen>
  </example>
  <example xml:id="ex-appdendix-parm-ex3">
   <title>VLANでのインストール用のparmfile</title>
<screen>ro ramdisk_size=50000 MANUAL=0 PORTNO=1 ReadChannel=0.0.b140
WriteChannel=0.0.b141 DataChannel=0.0.b142
cio_ignore=all,!condev,!0.0.b140-0.0.b142,!0.0.e92c,!0.0.5000,!0.0.5040
HostIP= Gateway= Hostname=zsystems.example.com nameserver=192.168.0.1
Install=ftp://user:password@10.0.0.1/s390x/SLES15.0/INST/ usevnc=1
vncpassword=12345 InstNetDev=osa Layer2=1 OSAInterface=qdio ssl_certs=0
osahwaddr= domain=example.com self_update=0
ifcfg=eth0.201=192.168.0.2/16,192.168.0.1</screen>
  </example>
 </sect1>
 <sect1 xml:id="sec-appdendix-vt220">
  <title>vt220ターミナルエミュレータの使用</title>

  <para>
   最新のMicroCodeレベルでは、標準のラインモードターミナルのほか、統合されたvt220ターミナルエミュレータ(ASCIIターミナル)を使用できます。vt220ターミナルは<filename>/dev/ttysclp0</filename>に接続されます。ラインモードターミナルは<filename>/dev/ttysclp_line0</filename>に接続されます。LPARによるインストールでは、デフォルトでvt220ターミナルエミュレータが有効になります。
  </para>

  <para>
   HMCでASCII Consoleを起動するには、HMCにログインし、<menuchoice> <guimenu>Systems Management (システム管理)</guimenu>
   <guimenu>システム</guimenu>
   <guimenu><phrase><replaceable>IMAGE_ID</replaceable></phrase>
  </guimenu></menuchoice>の順に選択します。LPARのラジオボタンを選択し、<menuchoice> <guimenu>Recovery (回復)</guimenu> <guimenu>Integrated ASCII Console (統合ASCII Console)</guimenu> </menuchoice>の順に選択します。
  </para>

  <para>
   ブート時にカーネルメッセージをシステムコンソールからvt220ターミナルにリダイレクトするには、次のエントリを、<filename>/etc/zipl.conf</filename>内の<literal>parameters</literal>行に追加します。
  </para>

<screen>console=ttysclp0 console=ttysclp_line0</screen>

  <para>
   その結果、<literal>parameters</literal>行は次の例のようになります。
  </para>

<screen>parameters = "root=/dev/dasda2 TERM=dumb console=ttysclp0 console=ttysclp_line0"</screen>

  <para>
   <filename>/etc/zipl.conf</filename>内の変更を保存し、<command>zipl</command>を実行してシステムを再起動します。
  </para>
 </sect1>
 <sect1 xml:id="sec-appdendix-further-information">
  <title>IBM Zに関するさらに詳しい情報</title>

  <para>
   IBM Zに関するさらに詳しい技術ドキュメントを入手するには、IBM Redbooks (<link xlink:href="https://www.redbooks.ibm.com/Redbooks.nsf/domains/zsystems"/>)またはIBM developerWorks (<link xlink:href="https://www.ibm.com/developerworks/linux/linux390/"/>)を参照してください。<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>固有のドキュメントについては、<link xlink:href="https://www.ibm.com/developerworks/linux/linux390/documentation_suse.html"/>を参照してください。
  </para>

  <sect2 xml:id="sec-intro-further-information-general">
   <title>Linux on IBM Zに関する一般的なドキュメント</title>
   <para>
    Linux on IBM Zに関する一般情報については、次のドキュメントを参照してください。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Linux on IBM eServer zSeries and S/390: ISP and ASP Solutions (SG24-6299)
     </para>
    </listitem>
   </itemizedlist>
   <para>
    これらのドキュメントは、Linuxの現在の状態を反映していない可能性がありますが、説明されているLinux展開の原則は変化していません。
   </para>
  </sect2>

  <sect2 xml:id="sec-intro-further-information-technical">
   <title>Linux on IBM Zについての技術的問題</title>
   <para>
    Linuxカーネルとアプリケーションのトピックについて詳細な技術情報を得るには、次のドキュメントを参照してください。最新のcode dropについては、これらのドキュメントの最新版をインターネットで参照してください(<link xlink:href="http://www.ibm.com/developerworks/linux/linux390/index.html"/>)。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Linux on System z Device Drivers, Features, and Commands
     </para>
    </listitem>
    <listitem>
     <para>
      zSeries ELF Application Binary Interface Supplement
     </para>
    </listitem>
    <listitem>
     <para>
      Linux on System z Device Drivers, Using the Dump Tools
     </para>
    </listitem>
    <listitem>
     <para>
      IBM zEnterprise 196 Technical Guide
     </para>
    </listitem>
    <listitem>
     <para>
      IBM zEnterprise EC12 Technical Guide
     </para>
    </listitem>
    <listitem>
     <para>
      IBM z13 Technical Guide
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Linuxアプリケーション開発用のRedbookは、<link xlink:href="http://www.redbooks.ibm.com"/>にもあります。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Linux on IBM eServer zSeries and S/390: Application Development (SG24-6807)
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="sec-info-further-information-advanced">
   <title>Linux on IBM Zの詳細設定</title>
   <para>
    より詳細なIBM Zのシナリオについては、次のRedbook、Redpaper、およびリンクを参照してください。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Linux on IBM eServer zSeries and S/390:Large Scale Deployment (SG24-6824)
     </para>
    </listitem>
    <listitem>
     <para>
      Linux on IBM eServer zSeries and S/390: Performance Measuring and Tuning (SG24-6926)
     </para>
    </listitem>
    <listitem>
     <para>
      Linux with zSeries and ESS: Essentials (SG24-7025)
     </para>
    </listitem>
    <listitem>
     <para>
      IBM TotalStorage Enterprise Storage Server Implementing ESS Copy Services with IBM eServer zSeries (SG24-5680)
     </para>
    </listitem>
    <listitem>
     <para>
      Linux on IBM zSeries and S/390: High Availability for z/VM and Linux (REDP-0220)
     </para>
    </listitem>
    <listitem>
     <para>
      Saved Segments Planning and Administration
     </para>
     <para>
      <link xlink:href="http://publibz.boulder.ibm.com/epubs/pdf/hcsg4a00.pdf"/>
     </para>
    </listitem>
    <listitem>
     <para>
      Linux on System z documentation for "Development stream"
     </para>
     <para>
      <link xlink:href="http://www.ibm.com/developerworks/linux/linux390/development_documentation.html"/>
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="sec-info-further-information-kvm">
   <title>IBM Z上のKVMでの仮想化</title>
   <para>
    IBM Z上のKVMの詳細については、次のドキュメントを参照してください(<link xlink:href="https://www.ibm.com/developerworks/linux/linux390/documentation_dev.html"/>)。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      「<citetitle>Installing SUSE Linux Enterprise Server 12 as a KVM Guest</citetitle>」 (SC34-2755-00)
     </para>
    </listitem>
    <listitem>
     <para>
      「<citetitle>KVM Virtual Server Quick Start</citetitle>」 (SC34-2753-01)
     </para>
    </listitem>
    <listitem>
     <para>
      「<citetitle>KVM Virtual Server Management</citetitle>」 (SC34-2752-01)
     </para>
    </listitem>
    <listitem>
     <para>
      「<citetitle>Device Drivers, Features, and Commands for Linux as a KVM Guest (Kernel 4.4)</citetitle>」 (SC34-2754-01)
     </para>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>
</chapter>
