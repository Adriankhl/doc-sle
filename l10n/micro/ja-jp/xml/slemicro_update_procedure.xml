<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="slemicro_update_procedure.xml" version="5.0" xml:id="cha-upgrade-procedure-slemicro"> 
 <title>Upgrading the system</title>
 <info>
  <abstract>
    <para>
    SUSE offers a command-line tool to upgrade a running system to a new version. The tool provides support for “rollback” to an older release. This chapter explains how to upgrade your system step by step.
   </para>
 </abstract>
</info>

 <para>
   SUSE releases new version of SLE Micro at regular intervals. To make it easy
   for customers to migrate to a new minor version and minimize downtime,
   SUSE supports migrating online while the system is running.
  </para>

<para>
   SLE Micro uses <emphasis>transactional updates</emphasis> to upgrade from one
   version to the next. This has the following advantages:
  </para>

  <itemizedlist>
   <listitem>
    <para>
     The system is always in a defined state until the first RPM is updated.
    </para>
   </listitem>
   <listitem>
    <para>
     Canceling is possible until the first RPM is updated.
    </para>
   </listitem>
   <listitem>
    <para>
     Simple recovery if there is an error.
    </para>
   </listitem>
   <listitem>
    <para>
     It is possible to do a <quote>rollback</quote> via system tools—no
     backup or restore needed.
    </para>
   </listitem>
   <listitem>
    <para>
     Use of all active repositories.
    </para>
   </listitem>   
  </itemizedlist>

  <sect1 xml:id="sec-run-transactional-update">
  <title>Upgrading to a new release</title>

  <note>
   <title>SUSE Linux Enterprise Live Patching</title>
   <para>
    If you have the SUSE Linux Enterprise Live Patching extension enabled, the extension is not affected during the upgrade procedure.
   </para>
  </note>
  
  <para>
   If your system is registered with the SUSE Customer Center, make sure
    to have an Internet connection during the following procedure: 
  </para>
  <procedure xml:id="proc-upgrade-registered">
   <title>Upgrade to a newer version</title>
   <step>
    <para>
     The upgrade procedure is performed by calling the
     <command>transactional-update</command>:
    </para>
<screen>
   transactional-update migration
   </screen>
   </step>
   <step>
    <para>
     A new snapshot is created.
    </para>
   </step>
   <step>
    <para>
     Current repositories are refreshed.
    </para>
   </step>
   <step>
    <para>
     A list of available migration targets is displayed. Enter a number.
    </para>
   </step>
   <step>
    <para>
     A list of packages to be installed or updated is displayed. Press
     <literal>y</literal> to continue with the upgrade procedure.
    </para>
   </step>
   <step>
    <para>
     To complete the upgrade, reboot your system and boot into the target
     version.
    </para>
   </step>
  </procedure>

  <para>
    If your system is not registered, proceed as follows:
  </para>
  <procedure xml:id="proc-unregistered-upgrade">
    <title>Upgrading an unregistered system</title>    
    <step>
        <para>Change the URL of the update
   repositories to point to the <phrase role="productnumber"><phrase os="slemicro">5.2</phrase></phrase>. </para>
    </step>
    <step>
      <para>
        Run the following command:
      </para>
      <screen><prompt role="root"># </prompt>transactional-update dup</screen>
    </step>
  </procedure>
 </sect1>

 <sect1 xml:id="sec-upgrade-cancel-slemicro">
  <title>Reverting the migration process</title>

  <para>
   If a new release does not work for you, SLE Micro supports reverting the
   system to the state before the migration process was started by using the
   <command>transactional-update rollback</command> command.
  </para>

  <para>
   The detailed procedure for a system rollback is described in
   <xref linkend="sec-rollback-procedure"/>.
  </para>
 </sect1>

</chapter>
